const KahootThemes={Kahoot:{red:"red.svg",blue:"blue.svg",green:"green.svg",yellow:"yellow.svg",logo:"logo.svg"},KonoSuba:{red:"red-konosuba.svg",blue:"blue-konosuba.svg",green:"green-konosuba.svg",yellow:"yellow-konosuba.svg",logo:"logo-konosuba.svg"},Rainbow:{red:"red.svg",blue:"blue.svg",green:"green.svg",yellow:"yellow.svg",logo:"logo.svg"}};class LoginPage{constructor(e){QuizResult.className="disabled button",QuizResult.removeAttribute("url"),ChallengeContinueButton.style.display="none",document.getElementById("handshake-fail-div")&&(document.getElementById("handshake-fail-div").outerHTML=""),-1==(new Date).toString().search("Apr 1")&&-1==(new Date).toString().search("Mar 31")||(game.theme="KonoSuba");const t=clearUI(),n=document.createElement("img"),a=document.createElement("p"),s=document.createElement("input"),o=document.createElement("button");if(t.className="Login",n.alt="Kahoot logo",n.src="/resource/"+KahootThemes[game.theme].logo,a.id="logotext",a.innerHTML="WINNER",s.type=e?"text":"tel",s.id="loginInput",s.placeholder=e?"昵称":"游戏密码",o.innerHTML=e?"好，出发！":"输入",o.id="loginButton",o.onclick=e?()=>game.join(s.value):()=>game.sendPin(s.value),s.onkeydown=e?e=>{if("Enter"==e.key)return game.join(s.value)}:e=>{if("Enter"==e.key)return game.sendPin(s.value)},a.onclick=()=>{a.style.display="none"},e){try{document.getElementById("lang").outerHTML=""}catch(e){}const e=document.createElement("button");e.innerHTML="获取随机名称",e.style.marginBottom="0.5rem",e.onclick=()=>{game.getRandom()},t.append(n,a,s,e,o),document.getElementsByClassName("grecaptcha-badge")[0].style.visibility="hidden","0"!=game.pin[0]&&(document.getElementById("div_challenge_options").parentElement.className="fadedm")}else{document.getElementById("div_challenge_options").parentElement.className="";const e=document.createElement("label");e.htmlFor="about",e.innerHTML="About",e.id="abtlnk";const r=document.createElement("div"),l=document.createElement("label");l.htmlFor="changelog",l.innerHTML="Changelog",r.id="chnge";const c=document.createElement("span");c.innerHTML="Kahoot！ 和K！ 徽标是Kahoot！的商标！ AS。";const i=document.createElement("span");i.innerHTML='<a href="/privacy/">隐私</a> | <a href="/terms/">条款</a>';const m=document.createElement("div");m.id="lang",m.innerHTML='<label for="langToggle"><img src="/resource/language.svg"/></label>\n      <input class="ch" id="langToggle" type="checkbox"/>\n      <div class="lang">\n        <button onclick="setCookie(\'en\')">English</button>\n        <button onclick="setCookie(\'es\')">Español</button>\n        <button onclick="setCookie(\'zh\')">中文</button>\n      </div>',document.getElementById("lang")||document.body.append(m),r.append(l,c,i),t.append(n,a,s,o,e,r)}const r=document.createElement("div");r.className="sm sidebar correct",r.innerHTML='<div class="mobihide2 mobihide">\n    <a href="/creator" target="_blank"><img src="/resource/icon-kahoot.svg" alt="create"><span>创作者</span></a>\n    <a href="/api" target="_blank"><img src="/resource/icon-api.svg" alt="api"><span>Kahoot API</span></a>\n    <a href="/how-it-works" target="_blank"><img src="/resource/icon-about.svg" alt="info mark"><span>这个怎么运作</span></a>\n    <a href="/blog" target="_blank"><img src="/resource/icon-blog.svg" alt="Icon made from http://www.onlinewebfonts.com/icon is licensed by CC BY 3.0"><span>博客</span></a>\n    <a href="/blog/download" target="_blank" class="mobihide2 mobihide"><img src="/resource/icon192.png" alt="download mark"><span>应用下载</span></a>\n    <hr/>\n    </div>\n    <a href="https://discord.gg/58SHzC2" target="_blank"><img src="/resource/logo-discord.svg" alt="discord"><span>Discord</span></a>\n    <a href="https://twitter.com/theusafyt" target="_blank"><img src="/resource/logo-twitter.svg" alt="twitter"><span>Twitter</span></a>\n    <a href="https://www.facebook.com/theusafmc" target="_blank"><img src="/resource/logo-fbook.svg" alt="facebook"><span>Facebook</span></a>\n    <a href="https://paypal.me/theusafyt" target="_blank"><img src="/resource/logo-paypal.svg" alt="paypal"><span>捐</span></a>',e||t.append(r),UIDiv.append(t)}}class TwoStepPage{constructor(e){new ErrorHandler(e?"2 Step Auth Failed.":"2 Step Auth Required");const t=new LobbyPage;t.main.removeChild(t.texts[1]),t.main.removeChild(t.texts[0]),document.body.className="Rainbow"==game.theme?"rainbow":"purple";const n=document.createElement("div");n.className="Answers";const a=document.createElement("img");a.src="/resource/"+KahootThemes[game.theme].red,a.alt="Red";const s=document.createElement("img");s.src="/resource/"+KahootThemes[game.theme].blue,s.alt="Blue";const o=document.createElement("img");o.src="/resource/"+KahootThemes[game.theme].green,o.alt="Green";const r=document.createElement("img");r.src="/resource/"+KahootThemes[game.theme].yellow,r.alt="Yellow",n.append(a,s,r,o),t.main.append(n),a.onclick=()=>{game.answer2(0,a)},s.onclick=()=>{game.answer2(1,s)},r.onclick=()=>{game.answer2(2,r)},o.onclick=()=>{game.answer2(3,o)},e&&activateLoading(!1,!0)}}class ErrorHandler{constructor(e,t){t?UIError.className="Error NotError":(UIError.className="Error",setSchema(UIError,"FailedActionStatus",!0,null)),UIError.innerHTML="";const n=document.createElement("p");n.innerHTML=e,UIError.append(n),UIError.style.right="5%",clearTimeout(game.errorTimeout),game.errorTimeout=setTimeout(()=>{UIError.style.right=""},4e3)}}class LobbyPage{constructor(){try{document.getElementById("lang").outerHTML=""}catch(e){}document.getElementById("handshake-fail-div")&&(document.getElementById("handshake-fail-div").outerHTML=""),window.onbeforeunload=function(e){e.returnValue="您确定要离开页面吗？"},document.querySelector(".ad-container").style.display="none","0"==game.pin[0]&&game.opts.ChallengeDisableAutoplay&&(ChallengeContinueButton.style.display="");const e=clearUI();e.className="lobby",document.body.className="Rainbow"==game.theme?"rainbow":"green";const t=document.createElement("div");t.id="L1",t.className="extra";const n=document.createElement("div");n.id="L2",n.className="extra","Rainbow"==game.theme&&(t.className="extra rainbow");const a=document.createElement("p");a.innerHTML="PIN: "+String(game.pin);const s=document.createElement("p");s.innerHTML=game.name.replace(/"<"/gm,"&lt;");const o=document.createElement("h1");o.className="shadow",o.setAttribute("text","你在！"),o.innerHTML="你在！";const r=document.createElement("h2");if(r.innerHTML="在屏幕上看到您的昵称？",r.setAttribute("text","在屏幕上看到您的昵称？"),r.className="shadow",t.append(a),n.append(s),e.append(t,n,o,r),void 0===game.guesses){const t=document.createElement("div");t.className="ChallengeQuestion noQuiz";const n=document.createElement("span");n.innerHTML=`<input id="nameInput" placeholder="输入测验名称" value="${document.getElementById("searchTerm").value||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input>`,t.append(document.createElement("br"),document.createElement("br"),n),e.append(t)}return UIDiv.append(e),{main:e,texts:[o,r],top:t,bottom:n}}}class GetReadyPage{constructor(e,t){game.recievedTime=Date.now(),game.questionStarted=!1,game.jumbleAnswer=[],game.question=e;const n=new LobbyPage;try{document.querySelector(".noQuiz").outerHTML=""}catch(e){}ChallengeContinueButton.style.display="none",document.body.className="blue",n.texts[0].innerHTML="题 "+((e.index||0)+1),n.texts[0].setAttribute("text",n.texts[0].innerHTML),n.texts[0].id="snarkText",n.texts[1].id="bottomText",game.answers=e.data,game.got_answers=e.cans,game.guesses=e.currentGuesses,game.total=e.ans.length,game.index=e.index||0,game.ans=e.ans,game.rawData=e.raw;let a={time:e.raw.timeAvailable||2e4};if(game.guesses.length>=1?(QuizResult.className="button",QuizResult.setAttribute("url","https://create.kahoot.it/details/"+game.guesses[0].uuid)):(QuizResult.className="disabled button",QuizResult.removeAttribute("url")),""!==document.getElementById("timeout_custom_1").value){const e=calculateTimeout(Number(document.getElementById("timeout_custom_1").value),a.time,0);document.getElementById("timeout").value=e/1e3,game.saveOptions()}else if(""!==document.getElementById("timeout_custom_2").value){const e=Number(document.getElementById("timeout_custom_2").value)-game.score,t=game.total-game.index;let n=0;n=e/t<500?a.time+500:calculateTimeout(e/t,a.time,game.streak),document.getElementById("timeout").value=n/1e3,game.saveOptions()}game.guesses&&game.guesses.length&&game.guesses[0].uuid!=game.oldQuizUUID&&(game.oldQuizUUID=game.guesses[0].uuid,dataLayer.push({event:"find_quiz",value:game.oldQuizUUID})),n.texts[1].innerHTML="准备",n.texts[1].setAttribute("text","准备");const s=document.createElement("p"),o=document.createElement("p");if(s.innerHTML=String(game.score),o.innerHTML=`${game.index+1} 的 ${game.total}`,s.className="dark",o.className="floater",n.top.append(o),n.bottom.append(s),activateLoading(!0,!1,"",!0),"content"==game.question.type&&(n.texts[0].innerHTML="喘口气，欣赏幻灯片。",n.texts[1].innerHTML=""),t)return n;const r=document.createElement("h2");r.innerHTML=game.question.timeLeft||"5",r.id="timer",n.main.append(r);let l=game.question.timeLeft||5;const c=setInterval(()=>{try{--l<0?clearInterval(c):(r.innerHTML=l,n.texts[1].innerHTML=["走！","组。","准备"][l>=3?2:l],n.texts[1].setAttribute("text",n.texts[1].innerHTML))}catch(e){clearInterval(c)}},1e3);if(Number(game.opts.searchLoosely)){if(2==game.opts.searchLoosely){const e=document.createElement("div");e.innerHTML="<span>准备</span>",e.className="next",e.addEventListener("click",()=>{e.innerHTML="<span>等候…</span>",e.className="faded next",function e(){if(game.questionStarted)return new QuestionAnswererPage;setTimeout((function(){e()}),500)}()}),n.main.append(e)}if(activateLoading(!1,!1),clearInterval(c),r.outerHTML="",n.texts[0].innerHTML="",n.texts[1].innerHTML="",n.texts[0].setAttribute("text",""),n.texts[1].setAttribute("text",""),0==game.guesses.length){const e=document.createElement("div");e.className="ChallengeQuestion noQuiz";const t=document.createElement("span");t.innerHTML=`<input id="nameInput" placeholder="输入测验名称" value="${document.getElementById("searchTerm").value||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input><a href="https://kahoot-win.herokuapp.com/blog/quiz-not-found" target="_blank" class="error-info">[?]</a>`,e.append(document.createElement("br"),document.createElement("br"),t),n.main.append(e)}else{const e=game.guesses[0].questions,t=[];for(let n=0;n<e.length;n++)if(e[n].type==game.question.type&&(e[n].layout==game.rawData.gameBlockLayout||!e[n].layout)&&("object"==typeof e[n].choices&&e[n].choices.length||null)==game.ans[game.index]){let a=!0,s=0;const o=game.got_answers.slice(0);for(let t=0;t<o.length;t++)if(e[n].choices&&e[n].choices.filter(e=>e.answer==o[t].n&&e.correct).length){a=!1;for(let n=0;n<e.length;n++)e[n].choices.filter(e=>e.answer==o[t].n&&e.correct).length&&s++;break}if(!a&&1===s)continue;t.push({i:n,q:e[n]})}const a=document.createElement("input");a.className="looseInput",a.placeholder="题";const s=document.createElement("div");s.className="looseDiv";const o=document.createElement("div");o.className="looseOptions";const r=e=>{o.innerHTML="";let n=!1;for(let a=0;a<t.length;a++){const s=t[a].q.question||t[a].q.title,r=/<\/?[ib]>|[^a-z0-9\s]/gim,l=/<\/?[ib]>/gim;const c=s.replace(r," ").replace(/\s+/gm," ").match(new RegExp(e.replace(r," ").replace(/\s+/gm," "),"gmi")),i=s.replace(l,"").match(new RegExp(e.replace(l,"").replace(/\[/gm,"\\[").replace(/\(/gm,"\\(").replace(/\{/gm,"\\{").replace(/\*/gm,"\\*").replace(/\+/gm,"\\+").replace(/\?/gm,"\\?").replace(/\|/gm,"\\|").replace(/\^/gm,"\\^").replace(/\$/gm,"\\$").replace(/\./gm,"\\.").replace(/\\/gm,"\\\\"),"gmi")),m=s.replace(r,"").match(new RegExp(e.replace(r,""),"gmi"));if(c||i||m){n||(game.correctIndex==t[a].i||(send({type:"CHOOSE_QUESTION_INDEX",message:t[a].i}),game.correctIndex=t[a].i,game.question.data=game.guesses[0].questions[t[a].i].choices,game.question.ans=game.ans),n=!0);const e=c||i||m,r=document.createElement("p");let l=s;for(let t=0;t<e.length;t++)l=s.replace(e[t],"<b>"+e[t]+"</b>");r.innerHTML=l,r.addEventListener("click",()=>{send({type:"CHOOSE_QUESTION_INDEX",message:t[a].i}),game.correctIndex=t[a].i,game.question.data=game.guesses[0].questions[t[a].i].choices,game.ans[game.index]=game.question.data?game.question.data.length:4,game.question.ans=game.ans,Array.from(o.children).forEach(e=>{e.className=""}),r.className="looseChoice"}),0===o.children.length&&(r.className="looseChoice"),o.append(r)}}};r(""),s.append(a,o),n.main.append(s),a.addEventListener("input",()=>{r(a.value)}),a.focus()}}else if(game.opts.previewQuestion){activateLoading(!1,!1),clearInterval(c),r.outerHTML="",n.texts[0].innerHTML="",n.texts[1].innerHTML="",n.texts[0].setAttribute("text",""),n.texts[1].setAttribute("text","");const e=document.createElement("div");e.className="ChallengeQuestion";const t=document.createElement("span");if(0==game.guesses.length?(e.className="ChallengeQuestion noQuiz",t.innerHTML=`<input id="nameInput" placeholder="输入测验名称" value="${document.getElementById("searchTerm").value||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input><a href="https://kahoot-win.herokuapp.com/blog/quiz-not-found" target="_blank" class="error-info">[?]</a>`):t.innerHTML="题: "+(game.guesses[0].questions[game.index].question||game.guesses[0].questions[game.index].title),e.append(document.createElement("br"),document.createElement("br"),t),!HideAnswers.checked){const e=document.createElement("div");e.className="questionPreviewAnswers",e.innerHTML="<h4>正确答案</h4>";let t=[];for(let e in game.answers)game.answers[e].correct&&t.push(e);for(let n in t){const a=["red","blue","yellow","green"],s=document.createElement("template");s.innerHTML=`<div class="${game.answers[t[n]].correct?"correct":""}">\n            <img class="icon${a[t[n]]}" src="/resource/${KahootThemes[game.theme][a[t[n]]]}" alt="answer choice icon">\n            <span>${game.answers[t[n]].answer}</span>\n          </div>`,e.append(s.content.cloneNode(!0))}n.main.append(e)}n.main.append(e)}else if(0==game.guesses.length){const e=document.createElement("div");e.className="ChallengeQuestion noQuiz";const t=document.createElement("span");t.innerHTML=`<input id="nameInput" placeholder="输入测验名称" value="${document.getElementById("searchTerm").value||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input><a href="https://kahoot-win.herokuapp.com/blog/quiz-not-found" target="_blank" class="error-info">[?]</a>`,e.append(document.createElement("br"),document.createElement("br"),t),n.main.append(e)}if(2==game.opts.fail){const e=document.createElement("div");e.className="failChoice";const t=document.createElement("input"),a=document.createElement("input");t.type=a.type="radio",t.name=a.name="fail",t.id="fail1",a.id="fail2",a.checked=!0;const s=document.createElement("label"),o=document.createElement("label");s.htmlFor="fail1",o.htmlFor="fail2",s.innerHTML="&nbsp;失败了&nbsp;",o.innerHTML="不要失败",e.append(t,s,a,o),n.main.append(e),s.onclick=o.onclick=function(){setTimeout(()=>{t.checked?send({type:"FAIL_CURRENT_QUESTION",message:!0}):send({type:"FAIL_CURRENT_QUESTION",message:!1})})}}return n}}class QuizStartPage{constructor(){const e=new LobbyPage;return ChallengeContinueButton.style.display="none",e.texts[0].innerHTML="做好准备！",e.texts[0].setAttribute("text","做好准备！"),e.texts[0].id="snarkText",e.texts[1].innerHTML="载入中...",e.texts[1].setAttribute("text","载入中..."),e.texts[1].id="bottomText",document.body.className="purple2",activateLoading(!0,!1,"",!1),e}}class QuestionAnswererPage{constructor(e){if(!0===game.isAnswerPage)return game.isAnswerPage=!1;if(ChallengeContinueButton.style.display="none",2==game.opts.searchLoosely&&!game.questionStarted)return void(game.questionStarted=!0);2!=game.opts.searchLoosely||game.opts.manual||setTimeout(()=>{send({type:"ANSWER_QUESTION",message:null})},1e3*game.opts.timeout-(Date.now()-game.recievedTime));const t=new GetReadyPage(game.question||e,!0);if(game.receivedQuestion=!0,game.questionStarted=!0,document.body.className="Rainbow"==game.theme?"rainbow":"","content"==game.question.type)return document.body.className="rainbow",t.texts[0].innerHTML="喘口气，欣赏幻灯片。",void(t.texts[1].innerHTML="");t.main.removeChild(t.texts[1]),t.main.removeChild(t.texts[0]);const n=document.createElement("div");if(n.className="Answers","open_ended"==game.question.type||"word_cloud"==game.question.type){document.body.className="rainbow";const e=document.createElement("input");e.className="openended";const a=game.answers.filter(e=>e.correct)[0];e.placeholder=a?a.answer:"",HideAnswers.checked&&(e.placeholder=""),e.onkeydown=t=>{"Enter"==t.key&&game.answer(e.value)},n.append(e),t.main.append(n),e.focus(),activateLoading(!1,!document.getElementById("manual").checked)}else{const e=document.createElement("img");e.src="/resource/"+KahootThemes[game.theme].red,e.alt="Red";const s=document.createElement("img");s.src="/resource/"+KahootThemes[game.theme].blue,s.alt="Blue";const o=document.createElement("img");o.src="/resource/"+KahootThemes[game.theme].green,o.alt="Green";const r=document.createElement("img");r.src="/resource/"+KahootThemes[game.theme].yellow,r.alt="Yellow";const l=[e,s,r,o],c=game.ans[game.index];for(let e=0;e<c;e++)l[e].setAttribute("draggable","false"),n.append(l[e]);if(2==game.ans[game.index]&&(e.style.maxHeight="100%",s.style.maxHeight="100%","TRUE_FALSE"==game.rawData.gameBlockLayout&&(e.setAttribute("css","layout-tfb"),s.setAttribute("css","layout-tfr"),e.src=s.src="/resource/"+KahootThemes[game.theme].blue,s.src="/resource/"+KahootThemes[game.theme].red)),t.main.append(n),activateLoading(!1,!document.getElementById("manual").checked),"jumble"==game.question.type){function a(e,t){const a=e.cloneNode(!0);n.append(a),a.style.left=(t.x||t.touches[0].clientX)+"px",e.style.visibility="hidden",a.className="draggable";const s=function(e){a.style.left=(e.x||e.touches[0].clientX)-16+"px",function(e,t){const a=[];let s=0,o=0;for(let e=0;e<t.length;e++){"hidden"===t[e].style.visibility&&(o=e);const n=t[e].getBoundingClientRect();s=n.width/2-16,a.push([n.x,n.x+n.width])}const r=(e.x||e.touches[0].clientX)+s;let l=0,c=1/0;for(let e=0;e<a.length;e++)Math.abs(r-a[e][0])<c&&(c=Math.abs(r-a[e][0]),l=e),Math.abs(r-a[e][1])<c&&(c=Math.abs(r-a[e][1]),l=e);"hidden"!==t[l].style.visibility&&(o>l?n.insertBefore(t[o],t[l]):n.insertBefore(t[o],t[l].nextSibling))}(e,n.querySelectorAll("img.jumble"))},o=function(){a.outerHTML="",e.style.visibility="",window.removeEventListener("mousemove",s),window.removeEventListener("touchmove",s),window.removeEventListener("mouseup",o),window.removeEventListener("touchend",o)};window.addEventListener("mousemove",s),window.addEventListener("touchmove",s),window.addEventListener("mouseup",o),window.addEventListener("touchend",o)}[e,s,r,o].forEach((e,t)=>{e.className="jumble",e.setAttribute("index",t);const n=function(t){a(e,t)};e.addEventListener("touchstart",n),e.addEventListener("mousedown",n)}),n.className="Answers jumble";const t=document.createElement("div");t.className="AnswerOptions";const l=document.createElement("img"),c=document.createElement("img");l.src="/resource/check.svg",c.src="/resource/reset.svg",l.onclick=()=>{game.answerJ(n.querySelectorAll("img.jumble"))},c.onclick=()=>{game.jumbleAnswer=[],new QuestionAnswererPage},t.append(l,c),n.append(t)}else if("multiple_select_quiz"==game.question.type||"multiple_select_poll"==game.question.type){game.multiAnswer={0:!1,1:!1,2:!1,3:!1},e.onclick=()=>{game.answerM(0,e)},s.onclick=()=>{game.answerM(1,s)},r.onclick=()=>{game.answerM(2,r)},o.onclick=()=>{game.answerM(3,o)};const t=document.createElement("div");t.className="AnswerOptions";const a=document.createElement("img"),l=document.createElement("img");a.src="/resource/check.svg",l.src="/resource/reset.svg",a.onclick=()=>{let e=[];for(let t in game.multiAnswer)game.multiAnswer[t]&&e.push(Number(t));game.answer(e)},l.onclick=()=>{game.multiAnswer={0:!1,1:!1,2:!1,3:!1},new QuestionAnswererPage},t.append(a,l),n.append(t)}else e.onclick=()=>{game.answer(0)},s.onclick=()=>{game.answer(1)},r.onclick=()=>{game.answer(2)},o.onclick=()=>{game.answer(3)};if(HideAnswers.checked&&"0"!=game.pin[0])return;const i=document.createElement("div");i.className="textAnswer",n.append(i);for(let e=0;e<game.answers.length;e++){game.answers[e].image&&(l[e].style.backgroundRepeat="no-repeat",l[e].style.backgroundSize="50% 50%",l[e].style.backgroundPosition="50% 50%",l[e].style.backgroundImage="url(https://media.kahoot.it/"+game.answers[e].image.id+")",l[e].src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),game.answers[e].correct&&(l[e].className=("jumble"===game.question.type?"jumble ":"")+"correct");const t=document.createElement("p");void 0===game.answers[e].answer?t.innerHTML="":t.innerHTML=("jumble"===game.question.type?e+1+". ":"")+game.answers[e].answer,i.append(t)}}if("0"==game.pin[0]){const e=document.createElement("div");e.className="ChallengeQuestion";const a=document.createElement("span");a.innerHTML=game.rawData.question||game.rawData.title,e.append(a),n.append(e);let s=game.rawData.timeAvailable/1e3;const o=document.createElement("p");o.className="chtimer",o.innerHTML=s;const r=setInterval(()=>{o.innerHTML=--s,o.isConnected||clearInterval(r)},1e3);t.bottom.prepend(o)}else if(0===game.guesses.length){const e=document.createElement("div");e.className="ChallengeQuestion noQuiz";const n=document.createElement("span");n.innerHTML=`<input id="nameInput" placeholder="输入测验名称" value="${document.getElementById("searchTerm").value||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input><a href="https://kahoot-win.herokuapp.com/blog/quiz-not-found" target="_blank" class="error-info">[?]</a>`,e.append(document.createElement("br"),document.createElement("br"),n),t.main.append(e)}}}class QuestionSnarkPage{constructor(e){const t=new GetReadyPage(game.question,!0);if(document.body.className="rainbow",ChallengeContinueButton.style.display="none",t.texts[1].innerHTML=e,t.texts[1].setAttribute("text",e),t.texts[0].innerHTML="",t.texts[0].setAttribute("text",""),t.texts[0].id="snarkText",t.texts[1].id="bottomText",0===game.guesses.length){const e=document.createElement("div");e.className="ChallengeQuestion noQuiz";const n=document.createElement("span");n.innerHTML=`<input id="nameInput" placeholder="输入测验名称" value="${document.getElementById("searchTerm").value||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input><a href="https://kahoot-win.herokuapp.com/blog/quiz-not-found" target="_blank" class="error-info">[?]</a>`,e.append(document.createElement("br"),document.createElement("br"),n),t.main.append(e)}activateLoading(!0,!1,"",!1)}}class QuestionEndPage{constructor(e){(e=JSON.parse(e)).isCorrect?game.streak++:game.streak=0,game.score=e.totalScore;const t=new GetReadyPage(game.question||e,!0);if("0"==game.pin[0]&&game.opts.ChallengeDisableAutoplay)ChallengeContinueButton.style.display="";else if(0===game.guesses.length){const e=document.createElement("div");e.className="ChallengeQuestion noQuiz";const n=document.createElement("span");n.innerHTML=`<input id="nameInput" placeholder="输入测验名称" value="${document.getElementById("searchTerm").value||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input><a href="https://kahoot-win.herokuapp.com/blog/quiz-not-found" target="_blank" class="error-info">[?]</a>`,e.append(document.createElement("br"),document.createElement("br"),n),t.main.append(e)}t.texts[1].id="",document.body.className=e.isCorrect?"green":"red",t.bottom.querySelector(".dark").innerHTML=e.totalScore,t.texts[0].innerHTML=e.isCorrect?"正确":"不正确的",t.texts[0].setAttribute("text",t.texts[0].innerHTML),t.texts[1].innerHTML=`你在 ${e.rank||0}${1==e.rank?"st":2==e.rank?"nd":3==e.rank?"rd":"th"} 秩`,t.texts[1].setAttribute("text",t.texts[1].innerHTML);const n=document.createElement("h2");n.className="shadow";try{n.innerHTML=e.nemesis.name.replace(/</gm,"&lt;")?`Just ${e.nemesis.totalScore-e.totalScore} from ${e.nemesis.name}`:"",n.setAttribute("text",n.innerHTML)}catch(e){}const a=new Image;a.id="correctMark",a.src=e.isCorrect?"/resource/check.svg":"/resource/cross.svg";const s=document.createElement("h3");s.innerHTML=e.isCorrect?"+"+(e.points+e.pointsData.answerStreakPoints.streakBonus):"继续尝试！",s.className="shadow";const o=new Image,r=document.createElement("div"),l=document.createElement("div"),c=document.createElement("h2");c.innerHTML="连胜",c.className="shadow",c.setAttribute("text","连胜"),c.style="display: inline-block; font-size: 1.5rem",l.style.position="relative",r.id="streakImage",l.append(c);const i=document.createElement("p");i.innerHTML=e.pointsData.answerStreakPoints.streakLevel,o.src="/resource/fire.svg",r.append(o),r.append(i),l.append(r),e.pointsData.answerStreakPoints.streakLevel<1?(c.style.display="none",game.hadStreak&&(c.style.display="inline-block",c.innerHTML="答案消失",c.setAttribute("text","答案消失"),game.hadStreak=!1),r.style.display="none"):(game.hadStreak=!0,r.style.display="inline-block"),t.main.insertBefore(a,t.texts[1]),t.main.insertBefore(l,t.texts[1]),t.main.insertBefore(s,t.texts[1]),t.main.append(n),activateLoading(!1,!1)}}class QuizEndPage{constructor(e){let t;e=JSON.parse(e),game.endData=e,t=1==game.end.info.rank?"1<sup>st</sup>":2==game.end.info.rank?"2<sup>nd</sup>":3==game.end.info.rank?"3<sup>rd</sup>":game.end.info.rank<=5?"前5！":"差不多了！";const n=new GetReadyPage(game.question,!0);if("0"==game.pin[0]&&game.opts.ChallengeDisableAutoplay&&(ChallengeContinueButton.style.display=""),document.body.className="purple",n.texts[0].innerHTML=t,n.texts[0].setAttribute("text",""),n.texts[1].innerHTML="好游戏！",n.texts[1].setAttribute("text","好游戏！"),n.texts[0].id="",n.texts[1].id="finalText",n.top.className="extra darker",n.bottom.className="extra darker",game.endData.podiumMedalType){const e=document.createElement("img");e.src=`/resource/${game.endData.podiumMedalType}.svg`,e.alt="Victory Medal",e.id="resultMedal",n.main.append(e)}if(!game.opts.hideAnswers){const e=document.createElement("div");e.id="finalGuess",e.innerHTML=`<span id="closeend">X</span>\n      <span id="kahootguess" class="out block" url="https://create.kahoot.it/details/${game.end.info.quizId}">Kahoot测验</span>\n      ${game.guesses.length?`<span id="outguess" class="out block" url="https://create.kahoot.it/details/${game.guesses[0].uuid}">猜测验</span>`:'<span class="block disabled out">（未找到）</span>'}`,n.main.append(e),document.getElementById("closeend").addEventListener("click",()=>{e.outerHTML=""});const t=Array.from(document.getElementsByClassName("out"));if(document.getElementById("outguess")){const e=document.getElementById("outguess"),t=document.getElementById("kahootguess");e.getAttribute("url")===t.getAttribute("url")&&(e.className="out block correct")}for(let e of t)e.addEventListener("click",()=>{e.getAttribute("url")&&window.open(e.getAttribute("url"),"_blank")})}activateLoading(!1,!1)}}class TeamTalkPage{constructor(e){if(game.opts.teamtalk){const t=new QuestionAnswererPage(this.question||e);return game.isAnswerPage=!0,t}const{main:t,texts:n}=new GetReadyPage(this.question||e,!0),[a,s]=n;document.body.className="Rainbow"==game.theme?"rainbow":"cyan";const o=document.createElement("h2");o.innerHTML="5",a.innerHTML="团队谈话",a.setAttribute("text","团队谈话"),s.innerHTML="讨论答案！",s.setAttribute("text","讨论答案！"),o.id="timer",t.append(o);let r=game.question.teamTalkDuration||5;const l=setInterval(()=>{try{--r<0?clearInterval(l):(o.innerHTML=r,a.innerHTML="团队谈话",a.setAttribute("text","团队谈话"),s.innerHTML="讨论答案！",s.setAttribute("text","讨论答案！"))}catch(e){clearInterval(l)}},1e3)}}class TimeUpPage{constructor(){if(game.receivedQuestion)return;const{main:e,texts:t}=new LobbyPage;try{document.querySelector(".noQuiz").outerHTML=""}catch(e){}if(!game.guesses||0===game.guesses.length){const t=document.createElement("div");t.className="ChallengeQuestion noQuiz";const n=document.createElement("span");n.innerHTML=`<input id="nameInput" placeholder="输入测验名称" value="${document.getElementById("searchTerm").value||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input><a href="https://kahoot-win.herokuapp.com/blog/quiz-not-found" target="_blank" class="error-info">[?]</a>`,t.append(document.createElement("br"),document.createElement("br"),n),e.append(t)}const[n,a]=t;document.body.className="Rainbow"==game.theme?"rainbow":"red",n.innerHTML="时间到",n.id="snarkText",n.setAttribute("text","时间到"),a.innerHTML="你在 0th 秩",a.setAttribute("text","你在 0th 秩");const s=document.createElement("h3");s.innerHTML="我们信任你！",s.setAttribute("text","我们信任你！"),s.className="shadow",e.insertBefore(s,a)}}class FeedbackPage{constructor(){const{main:e,texts:t,top:n,bottom:a}=new LobbyPage,[s,o]=t;try{document.querySelector(".noQuiz").outerHTML=""}catch(e){}document.body.className="Rainbow"==game.theme?"rainbow":"",a.outerHTML="",n.className="gameOver",n.innerHTML="<p>游戏结束</p>";try{document.querySelector("noQuiz").outerHTML=""}catch(e){}e.className="Feedback",e.style.padding="0",s.outerHTML="",o.outerHTML="";const r=document.createElement("div");r.className="feedback",r.innerHTML='\n    <p>您如何评价这个kahoot？</p>\n    <div class="star-container">\n      <input id="star1" type="radio" name="star" value="1"/>\n      <label for="star1"></label>\n      <input id="star2" type="radio" name="star" value="2"/>\n      <label for="star2"></label>\n      <input id="star3" type="radio" name="star" value="3"/>\n      <label for="star3"></label>\n      <input id="star4" type="radio" name="star" value="4"/>\n      <label for="star4"></label>\n      <input id="star5" type="radio" name="star" value="5"/>\n      <label for="star5"></label>\n    </div>\n    <div class="thumb-container">\n      <p>你学到了什么吗？</p>\n      <div>\n        <input type="radio" name="learn" id="learn1" value="1"/>\n        <label for="learn1"></label>\n        <input type="radio" name="learn" id="learn2" value="0"/>\n        <label for="learn2"></label>\n      </div>\n    </div>\n    <div class="thumb-container">\n      <p>你会推荐吗？</p>\n      <div>\n        <input type="radio" name="rec" id="rec1" value="1"/>\n        <label for="rec1"></label>\n        <input type="radio" name="rec" id="rec2" value="0"/>\n        <label for="rec2"></label>\n      </div>\n    </div>\n    <p>要继续，请告诉我们您的感受</p>\n    <div class="face-container">\n      <input type="radio" name="feel" id="feel1" value="1"/>\n      <label for="feel1"></label>\n      <input type="radio" name="feel" id="feel2" value="0"/>\n      <label for="feel2"></label>\n      <input type="radio" name="feel" id="feel3" value="-1"/>\n      <label for="feel3"></label>\n    </div>',e.append(r);const l=Array.from(document.querySelectorAll('[name="star"]'));for(let e of l)e.addEventListener("click",()=>{for(let e of l)e.className="";for(let t=+e.id.split("star")[1];t>0;t--)document.getElementById("star"+t).className="selected"});const c=document.getElementById("feel1"),i=document.getElementById("feel2"),m=document.getElementById("feel3");c.onclick=m.onclick=i.onclick=()=>{const e=(document.querySelector('input[name="star"]:checked')||{}).value,t=(document.querySelector('input[name="learn"]:checked')||{}).value,n=(document.querySelector('input[name="rec"]:checked')||{}).value,a=document.querySelector('input[name="feel"]:checked').value;return send({type:"SEND_FEEDBACK",message:{fun:+e,learn:+t,recommend:+n,overall:+a}}),new QuizEndPage(JSON.stringify(game.endData))}}}function calculateTimeout(e,t){const n=-2*t*(e/1e3-1);return n<.1?0:n}function activateLoading(e,t,n,a){HideDiv.style.background=t?"rgba(0,0,0,0.3)":"transparent",HideDiv.style.pointerEvents=t?"all":"none",HideDiv.children[0].children[0].style.display=e?"inline-block":"none",LoadingText.innerHTML=n||"",HideDiv.children[0].children[0].src=a?"/resource/load-large.svg":"/resource/load-hole.svg"}function setSchema(e,t,n,a){n&&e.setAttribute("itemscope",""),a&&e.setAttribute("itemtype","https://schema.org/"+t),a&&e.setAttribute("itemprop",a)}function sleep(e){return new Promise(t=>{setTimeout(t,1e3*e)})}async function resetGame(e){const t=game;if(socket&&(socket.onclose=null,socket.close(),socket=null),game=new Game,e){await game.sendPin(t.pin);const e=async n=>{n=n.data,"Message.PinGood"==JSON.parse(n).type?(new LobbyPage,await sleep((25e3-(Date.now()-t.disconnectTime))/1e3),send({message:{cid:t.cid,answers:t.got_answers},type:"RECOVER_DATA"}),game.saveOptions()):resetGame(),socket.removeEventListener("message",e)};socket.addEventListener("message",e)}else new LoginPage,document.body.className="rainbow",document.getElementById("author").value="",document.getElementById("uuid").value="",document.getElementById("searchTerm").value="",document.getElementById("timeout_custom_1").value="",document.getElementById("timeout_custom_2").value="",game.loadOptions()}function clearUI(){return activateLoading(!1,!1),UIDiv.innerHTML="",document.createElement("div")}let presetNumber=0;function loadSetting(e,t){for(let t in e){const n=document.getElementById(t);"checkbox"==n.type||"radio"==n.type?n.checked=e[t]:n.value=e[t]}game.saveOptions(),new ErrorHandler("恢复预设 '"+t+"'",!0)}function addPreset(e){game.saveOptions(),document.querySelectorAll(".preset.remove").forEach(e=>{e.outerHTML=""});let t=[];if(localStorage.presets)try{t=JSON.parse(localStorage.presets)}catch(e){}t.push({name:e,options:{brute:game.opts.brute,fail:game.opts.fail,teamtalk:game.opts.teamtalk,manual:game.opts.manual,previewQuestion:game.opts.previewQuestion,searchLoosely:game.opts.searchLoosely,teamMembers:game.opts.teamMembers,theme:game.opts.theme,timeout:game.opts.timeout}}),localStorage.presets=JSON.stringify(t),loadPresets()}function loadPresets(){document.querySelectorAll(".preset.remove").forEach(e=>{e.outerHTML=""});try{const e=JSON.parse(localStorage.presets),t=document.getElementById("preset_add_div");for(let n of e){const e=n.options,a=document.createElement("template");a.innerHTML=`<div class="preset flex remove">\n        <div class="center">\n          <span class="presetTitle">${n.name} <label for="preset_${presetNumber}">(?)</label></span>\n          <input type="checkbox" id="preset_${presetNumber}" class="ch nosend">\n          <div>\n            <p>主题 <span class="yellow">${e.theme}</span></p>\n            <p>超时 <span class="yellow">${e.timeout||"0"}</span></p>\n            <p>球队 <span class="yellow">${e.teamMembers||"(unset)"}</span></p>\n            <p>失败 <span class="${Number(e.fail)?"green":"red"}">${Number(e.fail)?"开":"关"}</span></p>\n            <p>疏松 <span class="${Number(e.searchLoosely)?"green":"red"}">${Number(e.searchLoosely)?"开":"关"}</span></p>\n            <p>蛮力 <span class="${e.brute?"green":"red"}">${e.brute?"开":"关"}</span></p>\n            <p>手册 <span class="${e.manual?"green":"red"}">${e.manual?"开":"关"}</span></p>\n            <p>预习 <span class="${e.previewQuestion?"green":"red"}">${e.previewQuestion?"开":"关"}</span></p>\n            <p>跳过团队谈话 <span class="${e.teamtalk?"green":"red"}">${e.teamtalk?"开":"关"}</span></p>\n          </div>\n          <button id="restore_${presetNumber}" class="block">恢复</button>\n          <img src="/resource/cross.svg" alt="delete" id="delete_${presetNumber}">\n        </div>\n      </div>`,document.getElementById("preset_container").insertBefore(a.content.cloneNode(!0),t),document.getElementById("restore_"+presetNumber).onclick=function(){loadSetting({theme:e.theme,timeout:e.timeout,teamMembers:e.teamMembers,fail:e.fail,searchLoosely:e.searchLoosely,brute:e.brute,manual:e.manual,previewQuestion:e.previewQuestion},n.name)},document.getElementById("delete_"+presetNumber).onclick=function(){try{let e=JSON.parse(localStorage.presets);e=e.filter(e=>e.name!=n.name),localStorage.presets=JSON.stringify(e),loadPresets()}catch(e){}},presetNumber++}}catch(e){}}const ChallengeContinueButton=document.getElementById("ChallengeNext"),SettingDiv=document.getElementById("settings"),SettingSwitch=document.getElementById("menu_toggle"),AboutSwitch=document.getElementById("about"),ChangelogSwitch=document.getElementById("changelog"),HideDiv=document.getElementsByClassName("Loading")[0],UIError=document.getElementsByClassName("Error")[0],UIDiv=document.getElementsByClassName("Main")[0],HideAnswers=document.getElementById("hideAnswers"),LoadingText=document.getElementById("loadingText"),ThemeChooser=document.getElementById("theme"),QuizResult=document.getElementById("quizresult");new LoginPage(!1),loadPresets();let closePage=0;const SearchDivSettings=document.getElementById("div_search_options"),GameDivSettings=document.getElementById("div_game_options"),ChallengeDivSettings=document.getElementById("div_challenge_options"),dso=document.getElementById("dso"),dgo=document.getElementById("dgo"),dco=document.getElementById("dco");SearchDivSettings.onchange=GameDivSettings.onchange=ChallengeDivSettings.onchange=function(e){switch(e.target.id){case"div_search_options":dso.className="flex selected",dgo.className="flex",dco.className="flex";break;case"div_game_options":dso.className="flex",dgo.className="flex selected",dco.className="flex";break;case"div_challenge_options":dso.className="flex",dgo.className="flex",dco.className="flex selected"}},dgo.className="flex selected",AboutSwitch.addEventListener("click",()=>{closePage=AboutSwitch.checked?1:0}),ChangelogSwitch.addEventListener("click",()=>{closePage=ChangelogSwitch.checked?2:0}),ChallengeContinueButton.addEventListener("click",()=>{send({message:"",type:"NEXT_CHALLENGE"})}),SettingSwitch.onclick=()=>{SettingSwitch.checked||(dataLayer.push({event:"toggle_settings"}),document.getElementById("preset_toggle").checked&&(document.getElementById("preset_toggle").checked=!1),game.saveOptions()),closePage=0},ThemeChooser.addEventListener("change",()=>{game.theme=ThemeChooser.value,"Rainbow"==game.theme&&(SettingDiv.className="rainbow correct",document.querySelector(".About").className="About rainbow")}),QuizResult.addEventListener("click",()=>{QuizResult.getAttribute("url")&&window.open(QuizResult.getAttribute("url"),"_blank")});const shortcuts=e=>{if(e.ctrlKey){switch(e.key){case"e":send({type:"RECONNECT",message:"I think i lost connection"}),dataLayer.push({type:"reconnect",value:""});break;case"b":document.getElementById("brute").click(),new ErrorHandler("绕过2FA: "+(document.getElementById("brute").checked?"开":"关"),!0),dataLayer.push({type:"brute",value:document.getElementById("brute").checked});break;case"p":document.getElementById("fail").value=0==document.getElementById("fail").value?.9:0,new ErrorHandler("故意失败: "+(0!=document.getElementById("fail").value?"开":"关"),!0),dataLayer.push({type:"fail",value:document.getElementById("fail").value});break;case"m":document.getElementById("manual").click(),new ErrorHandler("手动控制: "+(document.getElementById("manual").checked?"开":"关"),!0),dataLayer.push({type:"manual",value:document.getElementById("manual").checked});break;case"h":document.getElementById("hideAnswers").click(),new ErrorHandler("隐藏正确的: "+(document.getElementById("hideAnswers").checked?"开":"关"),!0),dataLayer.push({type:"hide",value:document.getElementById("hideAnswers").checked});break;case"o":document.getElementById("challengeCorrect").click(),new ErrorHandler("挑战永远正确: "+(document.getElementById("challengeCorrect").checked?"开":"关"),!0),dataLayer.push({type:"correct",value:document.getElementById("challengeCorrect").checked});break;case"u":document.getElementById("previewQuestion").click(),new ErrorHandler("预览问题: "+(document.getElementById("previewQuestion").checked?"开":"关"),!0),dataLayer.push({type:"preview",value:document.getElementById("previewQuestion").checked});break;case"j":try{SettingDiv.style.display?(SettingDiv.style="",document.querySelector(".Changelog").style="",document.querySelector(".About").style="",document.getElementById("tutorial").style="",document.querySelector(".misc").style="",document.querySelector(".Error").style="",document.getElementById("logotext").style="",document.querySelector(".sm.sidebar").style="",document.getElementById("abtlnk").style="",document.getElementById("chnge").style=""):(SettingDiv.style="display: none",document.querySelector(".Changelog").style="display: none",document.querySelector(".About").style="display: none",document.getElementById("tutorial").style="display: none",document.querySelector(".misc").style="opacity: 0",document.querySelector(".Error").style="display: none",document.getElementById("logotext").style="display: none",document.querySelector(".sm.sidebar").style="display: none",document.getElementById("abtlnk").style="display: none",document.getElementById("chnge").style="display: none")}catch(e){console.log(e)}finally{const e=document.head.querySelector('[rel="shortcut icon"]')||document.createElement("link");e.isConnected||(e.rel="shortcut icon",e.href="https://kahoot.it/favicon.ico",document.head.append(e),document.title="Play Kahoot!"),document.getElementById("manual").checked=!0,document.getElementById("hideAnswers").checked=Boolean(SettingDiv.style.display),game.saveOptions(),dataLayer.push({type:"panick",value:""})}break;case"d":document.getElementById("ChallengeDisableAutoplay").click(),new ErrorHandler("挑战自动游戏: "+(document.getElementById("ChallengeDisableAutoplay").checked?"关":"开"),!0),dataLayer.push({type:"autoplay",value:document.getElementById("ChallengeDisableAutoplay").checked});break;case"k":document.getElementById("searchLoosely").value=Number(document.getElementById("searchLoosely").value)?0:1,new ErrorHandler("松散搜索: "+(Number(document.getElementById("searchLoosely").value)?"开":"关"),!0),dataLayer.push({type:"loose",value:document.getElementById("searchLoosely").value});break;case"t":document.getElementById("teamtalk").click(),new ErrorHandler("跳过团队谈话: "+(Number(document.getElementById("teamtalk").checked)?"开":"关"),!0),dataLayer.push({type:"teamtalk",value:document.getElementById("teamtalk").checked});break;default:return}dataLayer.push({event:"shortcut"}),e.preventDefault(),e.stopPropagation(),game.saveOptions()}};window.addEventListener("keydown",shortcuts),UIError.addEventListener("click",()=>{clearTimeout(game.errorTimeout),UIError.style.right="",dataLayer.push({event:"close_error"})});let pressTime=-1;SettingSwitch.addEventListener("click",()=>{if(Date.now()-pressTime<500)return pressTime=-1,void shortcuts({ctrlKey:!0,key:"j",preventDefault:()=>{},stopPropagation:()=>{}});pressTime=Date.now()});const SearchInput=document.getElementById("sub-quiz-input"),SearchOutput=document.getElementById("sub-quiz-output");let SearchIndex=0;function Search(e,t){SearchOutput.innerHTML="载入中...";const n=new XMLHttpRequest;n.open("GET",`/search?q=${encodeURIComponent(e)}&c=${Number(t)}`),n.send(),n.onload=function(){const a=JSON.parse(n.response);if(0===a.length)return void(SearchOutput.innerHTML="没有结果。");FormatSearch(a),document.getElementById("sub-quiz-next").addEventListener("click",()=>{Search(e,(t||0)+25)});Array.from(document.getElementsByClassName("sub-quiz-button")).forEach(e=>{e.addEventListener("click",()=>{const t=e.nextElementSibling.value;document.getElementById("uuid").value=t,document.getElementById("sub-uuid").checked=!1})})}}function FormatSearch(e){SearchOutput.innerHTML='\n  <span>\n    <span class="sub-quiz-img"><img src="/resource/red-konosuba.svg"/></span>\n    <span class="sub-quiz-title">测验标题</span>\n    <span class="sub-quiz-author">测验创作者</span>\n    <span class="sub-quiz-questions">问题数</span>\n    <button id="sub-quiz-next">下一个</button>\n  </span>\n  <hr/>\n  ';for(let t in e){const n=e[t],a=document.createElement("template");a.innerHTML=`<span>\n      <span class="sub-quiz-img"><img src="${n.cover}"/></span>\n      <span class="sub-quiz-title">${n.title}</span>\n      <span class="sub-quiz-author">${n.creator_username}</span>\n      <span class="sub-quiz-questions">${n.questions.length}</span>\n      <button class="sub-quiz-button">Use</button>\n      <input type="text" class="ch" value="${n.uuid}"/>\n    </span>`,SearchOutput.append(a.content.cloneNode(!0))}}SearchInput.addEventListener("keydown",e=>{"Enter"===e.code&&(SearchIndex=0,Search(SearchInput.value,SearchIndex))});