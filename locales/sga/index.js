var socket=null;const MessageHandler={Error:{INVALID_USER_INPUT:()=>{console.log("WS Message ERR: Invalid user input")},INVALID_PIN:()=>(new LoginPage(!1),new ErrorHandler("Invalid PIN")),MAX_SESSION_COUNT:()=>{setTimeout(()=>{new ErrorHandler("Your IP address has too many sessions/tabs connected currently."),activateLoading(!0,!0,"Too many sessions. Please wait."),setTimeout(()=>{resetGame()},3e4)},5e3)},INVALID_NAME:e=>(clearTimeout(game.handshakeTimeout),"Duplicate name"!==e.description?(new ErrorHandler("Failed to connect: "+(e.error||e)),new LoginPage):(new ErrorHandler("Invalid name."),new LoginPage(!0))),SESSION_NOT_CONNECTED:()=>{new ErrorHandler("You can't do that yet; you haven't joined a game.")},EMPTY_NAME:()=>{new ErrorHandler("No quiz name has been provided. The server will not search until this information is provided.")},HANDSHAKE:()=>{let e;switch(clearTimeout(game.handshakeTimeout),new ErrorHandler("Connection to Kahoot's server was blocked. ¯\\_(ツ)_/¯"),document.getElementById("handshake-fail-div")&&(document.getElementById("handshake-fail-div").outerHTML=""),detectPlatform()){case"Windows":e="https://www.mediafire.com/file/ju7sv43qn9pcio6/kahoot-win-win.zip/file";break;case"MacOS":e="https://www.mediafire.com/file/bcvxlwlfvbswe62/Kahoot_Winner.dmg/file";break;default:e="https://www.mediafire.com/file/zb5blm6a8dyrwtb/kahoot-win-linux.tar.gz/file"}const t=document.createElement("div");t.innerHTML=`<span>Hmm, we seem to be having trouble on our end. Try <span class="mobihide">downloading our app or </span>pressing the report button below!</span>\n      <br>\n      <a class="mobihide" href="${e}" onclick="dataLayer.push({event:'download_app'})" target="_blank">Download App</a>\n      <br>\n      <button onclick="send({type:'HANDSHAKE_ISSUES',message:'AAAA!'});this.innerHTML = 'Issue has been reported.';this.onclick = null;dataLayer.push({event:'report_error'});" title="This button may decrease the amount of time to reset the server.">Report Issues</button>`,t.id="handshake-fail-div",t.style="\n        position: fixed;\n        top: 4rem;\n        z-index: 1000;\n        width: 100%;\n        color: white;\n        background: #888;\n        text-align: center;\n        border-radius: 5rem;\n      ",document.body.append(t)}},Message:{SetName:e=>{document.getElementById("loginInput").value=e},PinGood:e=>{const t=e.match(/\d+/g)[0];t!=game.pin&&(game.pin=t);try{TutorialDiv.innerHTML=""}catch(e){}return new LoginPage(!0)},JoinSuccess:e=>("Music"===game.theme?game.playSound("/resource/music/lobby.m4a"):"Minecraft"===game.theme&&game.playSound("/resource/music/Minecraft.mp3"),e=JSON.parse(e),game.cid=e.cid,game.quizEnded=!1,dataLayer.push({event:"join_game"}),activateLoading(!1,!1),clearTimeout(game.handshakeTimeout),new LobbyPage),QuizStart:()=>{try{game.music.pause()}catch(e){}return new QuizStartPage},QuestionGet:e=>{const t=JSON.parse(e);return new GetReadyPage(t)},QuestionBegin:e=>(game.questionAnswered=!1,new QuestionAnswererPage(JSON.parse(e))),QuestionSubmit:e=>(game.questionAnswered=!0,new QuestionSnarkPage(e)),QuestionEnd:e=>{try{game.music.pause()}catch(e){}return new QuestionEndPage(e)},QuizFinish:e=>{game.quizEnded=!0,game.end.info=JSON.parse(e),dataLayer.push(Object.assign({event:"quiz_finish"},JSON.parse(e)))},FinishText:e=>("Music"===game.theme?game.playSound("/resource/music/podium.m4a"):"Minecraft"===game.theme&&game.playSound("/resource/music/Pigstep.m4a"),new QuizEndPage(e)),QuizEnd:e=>(game.quizEnded=!0,resetGame(),setTimeout((function(){new ErrorHandler("Quiz ended or kicked. ("+e+")")}),300)),RunTwoSteps:()=>(game.two=[],new TwoStepPage),Ping:()=>{console.log("Recieved ping from server")},FailTwoStep:()=>new TwoStepPage(!0),TwoStepSuccess:()=>new LobbyPage,Maintainance:e=>new ErrorHandler("Maintainance Alert: "+e),OK:()=>{game.ready=!0},GameReset:()=>{new LobbyPage,delete game.question,delete game.guesses,delete game.answers,delete game.rawData,delete game.ans,delete game.got_answers,game.index=0,game.streak=0,game.score=0,game.quizEnded=!1},NameAccept:e=>{const t=JSON.parse(e);game.name=t.playerName;try{document.getElementById("L2").innerHTML=`<p>${t.playerName}</p>`}catch(e){}},TimeOver:()=>{new TimeUpPage},Feedback:()=>{new FeedbackPage},TeamTalk:e=>{new TeamTalkPage(JSON.parse(e))}}};class Game{constructor(){this.socket=null,this.oldQuizUUID="",this.name="",this.streak=0,this.ready=!1,this.cid="",this.pin=0,this.score=0,this.answers=[],this.quizEnded=!0,this.total=0,this.index=0,this.end={},this.two=[],this.errorTimeout=null,this.jumbleAnswer=[],this.multiAnswer={0:!1,1:!1,2:!1,3:!1},this.theme="Kahoot",this.opts={},this.correctIndex=null,this.questionStarted=!1,this.questionAnswered=!1}sendPin(pin){return new Promise(res=>{this.pin=pin,grecaptcha.ready(()=>{grecaptcha.execute("6LcyeLEZAAAAAGlTegNXayibatWwSysprt2Fb22n",{action:"submit"}).then(token=>{this.socket=new WebSocket(`${"http:"==location.protocol?"ws://":"wss://"}${location.host}?token=${token}`),socket=this.socket,socket.onmessage=evt=>{evt=evt.data;let data=JSON.parse(evt);if("Error"==data.type)return MessageHandler.Error[data.message](data.data);eval(`MessageHandler.${data.type}("${data.message.replace(/\\/gim,"\\\\").replace(/"/gim,'\\"')}")`)},socket.onclose=()=>{game.disconnectTime=Date.now(),new ErrorHandler("Session disconnected."),activateLoading(!0,!0,"<br><br><br><br><p>Reconnecting</p>");let e=0;!function t(n){const a=new XMLHttpRequest;a.open("GET","/up"),a.send(),a.onerror=a.ontimeout=function(){if(++e>10)return location.href="https://theusaf.github.io/kahoot%20winner%20error.html";(n*=2)>30&&(n=30),setTimeout((function(){t(n)}),1e3*n)},a.onload=function(){if(200!=a.status||!/^-?\d+ (hours|minutes) until expected reset.*$/.test(a.response))return a.onerror(n);activateLoading(!1,!1),game.quizEnded||"0"==game.pin[0]?resetGame():resetGame(!0)}}(.5)},socket.onopen=()=>{const e=setInterval(()=>{this.ready&&(res(),send({type:"SET_PIN",message:pin}),this.loadOptions(),clearInterval(e))},500)}})}),activateLoading(!0,!0)})}join(e){this.name=e,send({type:"JOIN_GAME",message:e}),activateLoading(!0,!0),this.handshakeTimeout=setTimeout(()=>{let e;switch(document.getElementById("handshake-fail-div")&&(document.getElementById("handshake-fail-div").outerHTML=""),MessageHandler.Error.HANDSHAKE(),detectPlatform()){case"Windows":e="https://www.mediafire.com/file/ju7sv43qn9pcio6/kahoot-win-win.zip/file";break;case"MacOS":e="https://www.mediafire.com/file/bcvxlwlfvbswe62/Kahoot_Winner.dmg/file";break;default:e="https://www.mediafire.com/file/zb5blm6a8dyrwtb/kahoot-win-linux.tar.gz/file"}const t=document.createElement("div");t.innerHTML=`<span>Hmm, we seem to be having trouble on our end. Try <span class="mobihide">downloading our app or </span>pressing the report button below!</span>\n      <br>\n      <a href="${e}" onclick="dataLayer.push({event:'download_app'})" target="_blank">Download App</a>`,t.className="shortcut",t.id="handshake-fail-div",t.style="\n        position: fixed;\n        top: 4rem;\n        z-index: 1000;\n        width: 100%;\n        color: white;\n        background: #888;\n        text-align: center;\n        border-radius: 5rem;\n      ",document.body.append(t)},1e4)}getRandom(){dataLayer.push({event:"get_random_name"}),send({type:"GET_RANDOM_NAME",message:"please?"})}saveOptions(){const e=SettingDiv.querySelectorAll("input,select"),t={};for(let n=0;n<e.length;++n)t[e[n].id]="checkbox"==e[n].type?e[n].checked:e[n].value;localStorage.options=JSON.stringify({manual:t.manual,timeout:t.timeout,brute:t.brute,fail:t.fail,teamtalk:t.teamtalk,teamMembers:t.teamMembers,theme:t.theme,previewQuestion:t.previewQuestion,searchLoosely:t.searchLoosely,ChallengeDisableAutoplay:t.ChallengeDisableAutoplay,div_game_options:t.div_game_options,div_search_options:t.div_search_options,div_challenge_options:t.div_search_options});const n=game.opts;game.theme=t.theme,game.opts=t,send({type:"SET_OPTS",message:JSON.stringify(t)}),game.questionStarted&&!game.questionAnswered&&n.manual&&!game.opts.manual&&send({type:"ANSWER_QUESTION",message:null})}loadOptions(){let e;try{e=JSON.parse(localStorage.options),game.opts=e,game.theme=e.theme}catch(e){return}if(e){for(let t in e){const n=document.getElementById(t);"checkbox"==n.type?n.checked=e[t]:n.value=e[t]}if(socket&&1===socket.readyState)return game.saveOptions(),dataLayer.push(Object.assign({event:"load_options"},e)),new ErrorHandler("Restored Options!",!0);null!==socket&&setTimeout(()=>{this.loadOptions()},3e3)}}answer(e){activateLoading(!0,!0),send({type:"ANSWER_QUESTION",message:e}),dataLayer.push({event:"answer",value:e,type:this.question.type})}answer2(e,t){if(t.className="faded",-1==this.two.indexOf(e))return this.two.push(e),4==this.two.length?(send({type:"DO_TWO_STEP",message:JSON.stringify(this.two)}),void activateLoading(!0,!0,"")):void 0}answerJ(e){let t=[];for(let n=0;n<e.length;n++)t.push(Number(e[n].getAttribute("index")));this.answer(t)}answerM(e,t){this.multiAnswer[e]=!this.multiAnswer[e],-1!=t.className.indexOf("correct")?t.className=this.multiAnswer[e]?"fadedm correct":"correct":t.className=this.multiAnswer[e]?"fadedm":""}updateName(){clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(this.saveOptions,500)}playSound(e){this.music||(this.music=new Audio,this.music.addEventListener("timeupdate",()=>{this.music.currentTime>this.music.duration-.44&&(this.music.currentTime=0,this.music.play())})),this.music.pause(),this.music.src=e,this.music.play()}}function send(e){null!==socket&&socket.send(JSON.stringify(e))}function setCookie(e){document.cookie=`lang=${e}; expires=${new Date(Date.now()+31536e6).toGMTString()}; path=/`,"serviceWorker"in navigator?navigator.serviceWorker.getRegistrations().then((async function(t){for(let e of t)await e.unregister();location.href="en"!==e?"/"+e:"/"})).catch(()=>{location.href="en"!==e?"/"+e:"/"}):location.href="en"!==e?"/"+e:"/"}let game=new Game,egg="";const eggstyle=document.createElement("style");eggstyle.innerHTML="p,.sm span,img,h1,h2,.About h3,.tut_cont h3,h4{\n  animation: infinite windance 1s;\n}";let shouldStop=!1;function detectPlatform(){let e="Linux";return-1!=navigator.appVersion.indexOf("Win")&&(e="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&(e="MacOS"),-1!=navigator.appVersion.indexOf("X11")&&(e="UNIX"),-1!=navigator.appVersion.indexOf("Linux")&&(e="Linux"),e}window.addEventListener("keydown",e=>{"Escape"==e.key&&(0==closePage?SettingSwitch.click():1==closePage?AboutSwitch.click():ChangelogSwitch.click()),egg+=e.key;try{if(0!="winner".search(egg)&&0!="return by death".search(egg)&&0!="behold an unthinkable present".search(egg)&&0!="explosion".search(egg)){egg="",shouldStop&&(game.music.pause(),shouldStop=!1);try{document.body.removeChild(eggstyle)}catch(e){}}else if("winner"==egg)document.body.append(eggstyle);else if("return by death"==egg)"ReZero"===game.theme&&(game.playSound("/resource/music/return_by_death.mp3"),shouldStop=!0,document.body.style="box-shadow:inset 0 0 10rem 5rem darkviolet;",setTimeout(()=>{game.music.pause(),document.body.style=""},2e4*Math.random()+1e4));else if("behold an unthinkable present"==egg)"ReZero"===game.theme&&(game.playSound("/resource/music/behold_unthinkable_present.m4a"),shouldStop=!0);else if("explosion"==egg&&"KonoSuba"===game.theme&&0===game.pin){game.playSound("/resource/music/megumin_explosion.mp3"),document.body.style="box-shadow:inset 0 0 0.7rem 0.7rem #451b0e,inset 0 0 1.4rem 1.4rem #973716,inset 0 0 1.8rem 1.8rem #cd4606,inset 0 0 2.1rem 2.1rem #ec760c,inset 0 0 2.4rem 2.4rem #ffae34,inset 0 0 2.7rem 2.7rem #fefcc9";const e=document.createElement("img");e.src="/resource/red-konosuba.svg",e.style="position:fixed;top:calc(50% - 5rem);left:100%;width:10rem;transition:left 4s;",document.body.append(e),setTimeout(()=>{e.style.left="calc(75% - 5rem)"}),setTimeout(()=>{e.style.left="150%"},16e3),setTimeout(()=>{document.body.style="";const t=document.createElement("div");document.body.append(t),t.style="position:fixed;top:0;left:0;width:100%;height:100%;z-index:5000;transition:background 2s",t.style.background="darkorange",setTimeout(()=>{t.style.background="beige",setTimeout(()=>{e.outerHTML="",t.style.background="black",game.music.pause(),setTimeout(()=>{t.outerHTML=""},3e3)},3e3)},2e3)},21e3)}}catch(e){egg="",shouldStop&&(game.music.pause(),shouldStop=!1)}}),localStorage.KW_Version="v3.2.0";const checkVersion=new XMLHttpRequest;checkVersion.open("GET","/up"),checkVersion.send(),checkVersion.onload=function(){const e=checkVersion.response.split(": ")[1],t=localStorage.KW_Version||e;if("false"!=localStorage.KW_Update){if(e!=t){const t=document.createElement("div");t.id="UpdateDiv",t.innerHTML='<h2>A new update is available.</h2>\n    <h4>Would you like to update now?</h4>\n    <p>If this message keeps appearing, try hard refreshing your page or clearing your cache.</p>\n    <button id="UpdateYes">Yes</button><button id="UpdateNo">Not Yet</button><br>\n    <button onclick="localStorage.KW_Update = false;this.parentElement.outerHTML = \'\';">Disable update notification</button>',document.body.append(t),document.getElementById("UpdateYes").onclick=function(){"serviceWorker"in navigator?(document.getElementById("UpdateYes").innerHTML="Please wait...",navigator.serviceWorker.getRegistrations().then((async function(t){for(let e of t)await e.unregister();setTimeout((function(){localStorage.KW_Version=e,location.reload()}),3e3)})).catch((function(){document.getElementById("UpdateDiv").outerHTML="",new ErrorHandler("There was an error forcing an update. Please clear or reload the page cache manually.")}))):(document.getElementById("UpdateDiv").outerHTML="",new ErrorHandler("There was an error forcing an update. Please clear or reload the page cache manually."))},document.getElementById("UpdateNo").onclick=function(){document.getElementById("UpdateDiv").outerHTML=""}}localStorage.KW_Version||(localStorage.KW_Version=e)}};const KahootThemes={Kahoot:{red:"red.svg",blue:"blue.svg",green:"green.svg",yellow:"yellow.svg",logo:"logo-halloween.svg"},KonoSuba:{red:"red-konosuba.svg",blue:"blue-konosuba.svg",green:"green-konosuba.svg",yellow:"yellow-konosuba.svg",logo:"logo-konosuba.svg"},Rainbow:{red:"red.svg",blue:"blue.svg",green:"green.svg",yellow:"yellow.svg",logo:"logo-halloween.svg"},Music:{red:"red.svg",blue:"blue.svg",green:"green.svg",yellow:"yellow.svg",logo:"logo-halloween.svg"},FRANXX:{red:"red-franxx.svg",blue:"blue-franxx.svg",green:"green-franxx.svg",yellow:"yellow-franxx.svg",logo:"logo-halloween.svg"},ReZero:{red:"red-rezero.svg",blue:"blue-rezero.svg",green:"green-rezero.svg",yellow:"yellow-rezero.svg",logo:"logo-rezero.svg"},Minecraft:{red:"red-mc.svg",blue:"blue-mc.svg",green:"green-mc.svg",yellow:"yellow-mc.svg",logo:"logo-mc.png"}};class LoginPage{constructor(e){Themer(),QuizResult.className="disabled button",QuizResult.removeAttribute("url"),ChallengeContinueButton.style.display="none",document.getElementById("handshake-fail-div")&&(document.getElementById("handshake-fail-div").outerHTML=""),-1==(new Date).toString().search("Apr 1")&&-1==(new Date).toString().search("Mar 31")||(game.theme="KonoSuba");const t=clearUI(),n=document.createElement("img"),a=document.createElement("p"),s=document.createElement("input"),o=document.createElement("button");if(t.className="Login",n.alt="Kahoot logo",n.src="/resource/"+KahootThemes[game.theme].logo,a.id="logotext",a.innerHTML="WINNER",s.type=e?"text":"tel",s.id="loginInput",s.placeholder=e?"Nickname":"Game PIN",o.innerHTML=e?"OK, Go!":"Enter",o.id="loginButton",o.onclick=e?()=>game.join(s.value):()=>game.sendPin(s.value),s.onkeydown=e?e=>{if("Enter"==e.key)return game.join(s.value)}:e=>{if("Enter"==e.key)return game.sendPin(s.value)},a.onclick=()=>{a.style.display="none"},e){try{document.getElementById("lang").outerHTML=""}catch(e){}const e=document.createElement("button");e.innerHTML="Get Random Name",e.style.marginBottom="0.5rem",e.onclick=()=>{game.getRandom()},t.append(n,a,s,e,o),document.getElementsByClassName("grecaptcha-badge")[0].style.visibility="hidden","0"!=game.pin[0]&&(document.getElementById("div_challenge_options").parentElement.className="fadedm")}else{document.getElementById("div_challenge_options").parentElement.className="";const e=document.createElement("label");e.htmlFor="about",e.innerHTML="About",e.id="abtlnk";const r=document.createElement("div"),l=document.createElement("label");l.htmlFor="changelog",l.innerHTML="Changelog",r.id="chnge";const c=document.createElement("span");c.innerHTML="Kahoot! and the K! logo are trademarks of Kahoot! AS.";const i=document.createElement("span");i.innerHTML='<a href="/privacy/">Privacy</a> | <a href="/terms/">Terms</a>';const m=document.createElement("div");m.id="lang",m.innerHTML='<label for="langToggle"><img src="/resource/language.svg"/></label>\n      <input class="ch" id="langToggle" type="checkbox"/>\n      <div class="lang">\n        <button onclick="setCookie(\'en\')">English</button>\n        <button onclick="setCookie(\'es\')">Español</button>\n        <button onclick="setCookie(\'zh\')">中文</button>\n      </div>',document.getElementById("lang")||document.body.append(m),r.append(l,c,i),t.append(n,a,s,o,e,r)}const r=document.createElement("div");r.className="sm sidebar correct",r.innerHTML='<div class="mobihide2 mobihide">\n    <a href="/creator" target="_blank"><img src="/resource/icon-kahoot.svg" alt="create"><span>Creator</span></a>\n    <a href="/api" target="_blank"><img src="/resource/icon-api.svg" alt="api"><span>Kahoot API</span></a>\n    <a href="/blog" target="_blank"><img src="/resource/icon-blog.svg" alt="Icon made from http://www.onlinewebfonts.com/icon is licensed by CC BY 3.0"><span>Blog</span></a>\n    <a href="/blog/download" target="_blank" class="mobihide2 mobihide"><img src="/resource/icon192.png" alt="download mark"><span>App Download</span></a>\n    </div>\n    <a href="https://discord.gg/58SHzC2" target="_blank"><img src="/resource/logo-discord.svg" alt="discord"><span>Discord</span></a>\n    <a href="https://twitter.com/theusafyt" target="_blank"><img src="/resource/logo-twitter.svg" alt="twitter"><span>Twitter</span></a>\n    <a href="https://www.facebook.com/theusafmc" target="_blank"><img src="/resource/logo-fbook.svg" alt="facebook"><span>Facebook</span></a>',e||t.append(r),UIDiv.append(t)}}class TwoStepPage{constructor(e){new ErrorHandler(e?"2 Step Auth Failed.":"2 Step Auth Required");const t=new LobbyPage;t.main.removeChild(t.texts[1]),t.main.removeChild(t.texts[0]),document.body.className="Rainbow"==game.theme?"rainbow":"purple";const n=document.createElement("div");n.className="Answers";const a=document.createElement("img");a.src="/resource/"+KahootThemes[game.theme].red,a.alt="Red";const s=document.createElement("img");s.src="/resource/"+KahootThemes[game.theme].blue,s.alt="Blue";const o=document.createElement("img");o.src="/resource/"+KahootThemes[game.theme].green,o.alt="Green";const r=document.createElement("img");r.src="/resource/"+KahootThemes[game.theme].yellow,r.alt="Yellow",n.append(a,s,r,o),t.main.append(n),a.onclick=()=>{game.answer2(0,a)},s.onclick=()=>{game.answer2(1,s)},r.onclick=()=>{game.answer2(2,r)},o.onclick=()=>{game.answer2(3,o)},e&&activateLoading(!1,!0)}}class ErrorHandler{constructor(e,t){t?UIError.className="Error NotError":(UIError.className="Error",setSchema(UIError,"FailedActionStatus",!0,null)),UIError.innerHTML="";const n=document.createElement("p");n.innerHTML=e,UIError.append(n),UIError.style.right="5%",clearTimeout(game.errorTimeout),game.errorTimeout=setTimeout(()=>{UIError.style.right=""},4e3)}}class LobbyPage{constructor(){try{document.getElementById("lang").outerHTML=""}catch(e){}document.getElementById("handshake-fail-div")&&(document.getElementById("handshake-fail-div").outerHTML=""),window.onbeforeunload=function(e){e.returnValue="Are you sure you want to leave the page?"},document.querySelector(".ad-container").style.display="none",document.querySelector(".ad-container-2").style.display="none","0"==game.pin[0]&&game.opts.ChallengeDisableAutoplay&&(ChallengeContinueButton.style.display="");const e=clearUI();e.className="lobby",document.body.className="Rainbow"==game.theme?"rainbow":"green";const t=document.createElement("div");t.id="L1",t.className="extra";const n=document.createElement("div");n.id="L2",n.className="extra","Rainbow"==game.theme&&(t.className="extra rainbow");const a=document.createElement("p");a.innerHTML="PIN: "+String(game.pin);const s=document.createElement("p");s.innerHTML=game.name.replace(/"<"/gm,"&lt;");const o=document.createElement("h1");o.className="shadow",o.setAttribute("text","You're in!"),o.innerHTML="You're in!";const r=document.createElement("h2");if(r.innerHTML="See your nickname on screen?",r.setAttribute("text","See your nickname on screen?"),r.className="shadow",t.append(a),n.append(s),e.append(t,n,o,r),void 0===game.guesses){const t=document.createElement("div");t.className="ChallengeQuestion noQuiz";const n=document.createElement("span");n.innerHTML=`<input id="nameInput" placeholder="Enter Quiz Name" value="${document.getElementById("searchTerm").value||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input>`,t.append(document.createElement("br"),document.createElement("br"),n),e.append(t)}return UIDiv.append(e),{main:e,texts:[o,r],top:t,bottom:n}}}class GetReadyPage{constructor(e,t){game.recievedTime=Date.now(),game.questionStarted=!1,game.jumbleAnswer=[],game.question=e;const n=new LobbyPage;try{document.querySelector(".noQuiz").outerHTML=""}catch(e){}ChallengeContinueButton.style.display="none",document.body.className="blue",n.texts[0].innerHTML="Question "+((e.index||0)+1),n.texts[0].setAttribute("text",n.texts[0].innerHTML),n.texts[0].id="snarkText",n.texts[1].id="bottomText",game.answers=e.data,game.got_answers=e.cans,game.guesses=e.currentGuesses,game.total=e.ans.length,game.index=e.index||0,game.ans=e.ans,game.rawData=e.raw;let a={time:e.raw.timeAvailable||2e4};if(game.guesses.length>=1?(QuizResult.className="button",QuizResult.setAttribute("url","https://create.kahoot.it/details/"+game.guesses[0].uuid)):(QuizResult.className="disabled button",QuizResult.removeAttribute("url")),""!==document.getElementById("timeout_custom_1").value){const e=calculateTimeout(Number(document.getElementById("timeout_custom_1").value),a.time,0);document.getElementById("timeout").value=e/1e3,game.saveOptions()}else if(""!==document.getElementById("timeout_custom_2").value){const e=Number(document.getElementById("timeout_custom_2").value)-game.score,t=game.total-game.index;let n=0;n=e/t<500?a.time+500:calculateTimeout(e/t,a.time,game.streak),document.getElementById("timeout").value=n/1e3,game.saveOptions()}game.guesses&&game.guesses.length&&game.guesses[0].uuid!=game.oldQuizUUID&&(game.oldQuizUUID=game.guesses[0].uuid,dataLayer.push({event:"find_quiz",value:game.oldQuizUUID})),n.texts[1].innerHTML="Ready...",n.texts[1].setAttribute("text","Ready...");const s=document.createElement("p"),o=document.createElement("p");if(s.innerHTML=String(game.score),o.innerHTML=`${game.index+1} of ${game.total}`,s.className="dark",o.className="floater",n.top.append(o),n.bottom.append(s),activateLoading(!0,!1,"",!0),"content"==game.question.type)return n.texts[0].innerHTML="Take a breather, enjoy the slideshow.",n.texts[0].setAttribute("text","Take a breather, enjoy the slideshow."),n.texts[1].innerHTML="",n;if(t)return n;const r=document.createElement("h2");r.innerHTML=game.question.timeLeft||"5",r.id="timer",n.main.append(r);let l=game.question.timeLeft||5;const c=setInterval(()=>{try{--l<0?clearInterval(c):(r.innerHTML=l,n.texts[1].innerHTML=["Go!","Set.","Ready..."][l>=3?2:l],n.texts[1].setAttribute("text",n.texts[1].innerHTML))}catch(e){clearInterval(c)}},1e3);if(Number(game.opts.searchLoosely)){if(2==game.opts.searchLoosely){const e=document.createElement("div");e.innerHTML="<span>Ready!</span>",e.className="next",e.addEventListener("click",()=>{e.innerHTML="<span>Waiting...</span>",e.className="faded next",function e(){if(game.questionStarted)return new QuestionAnswererPage;setTimeout((function(){e()}),500)}()}),n.main.append(e)}if(activateLoading(!1,!1),clearInterval(c),r.outerHTML="",n.texts[0].innerHTML="",n.texts[1].innerHTML="",n.texts[0].setAttribute("text",""),n.texts[1].setAttribute("text",""),0==game.guesses.length){const e=document.createElement("div");e.className="ChallengeQuestion noQuiz";const t=document.createElement("span");t.innerHTML=`<input id="nameInput" placeholder="Enter Quiz Name" value="${document.getElementById("searchTerm").value||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input><a href="https://kahoot-win.herokuapp.com/blog/quiz-not-found" target="_blank" class="error-info">[?]</a>`,e.append(document.createElement("br"),document.createElement("br"),t),n.main.append(e)}else{const e=game.guesses[0].questions,t=[];for(let n=0;n<e.length;n++)if(e[n].type==game.question.type&&(e[n].layout==game.rawData.gameBlockLayout||!e[n].layout)&&("object"==typeof e[n].choices&&e[n].choices.length||null)==game.ans[game.index]){let a=!0,s=0;const o=game.got_answers.slice(0);for(let t=0;t<o.length;t++)if(e[n].choices&&e[n].choices.filter(e=>e.answer==o[t].n&&e.correct).length){a=!1;for(let n=0;n<e.length;n++)e[n].choices.filter(e=>e.answer==o[t].n&&e.correct).length&&s++;break}if(!a&&1===s)continue;t.push({i:n,q:e[n]})}const a=document.createElement("input");a.className="looseInput",a.placeholder="Question";const s=document.createElement("div");s.className="looseDiv";const o=document.createElement("div");o.className="looseOptions";const r=e=>{o.innerHTML="";let n=!1;for(let a=0;a<t.length;a++){const s=t[a].q.question||t[a].q.title,r=/<\/?[ib]>|[^a-z0-9\s]/gim,l=/<\/?[ib]>/gim;const c=s.replace(r," ").replace(/\s+/gm," ").match(new RegExp(e.replace(r," ").replace(/\s+/gm," "),"gmi")),i=s.replace(l,"").match(new RegExp(e.replace(l,"").replace(/\[/gm,"\\[").replace(/\(/gm,"\\(").replace(/\{/gm,"\\{").replace(/\*/gm,"\\*").replace(/\+/gm,"\\+").replace(/\?/gm,"\\?").replace(/\|/gm,"\\|").replace(/\^/gm,"\\^").replace(/\$/gm,"\\$").replace(/\./gm,"\\.").replace(/\\/gm,"\\\\"),"gmi")),m=s.replace(r,"").match(new RegExp(e.replace(r,""),"gmi"));if(c||i||m){n||(game.correctIndex==t[a].i||(send({type:"CHOOSE_QUESTION_INDEX",message:t[a].i}),game.correctIndex=t[a].i,game.question.data=game.guesses[0].questions[t[a].i].choices,game.question.ans=game.ans),n=!0);const e=c||i||m,r=document.createElement("p");let l=s;for(let t=0;t<e.length;t++)l=s.replace(e[t],"<b>"+e[t]+"</b>");r.innerHTML=l,r.addEventListener("click",()=>{send({type:"CHOOSE_QUESTION_INDEX",message:t[a].i}),game.correctIndex=t[a].i,game.question.data=game.guesses[0].questions[t[a].i].choices,game.ans[game.index]=game.question.data?game.question.data.length:4,game.question.ans=game.ans,Array.from(o.children).forEach(e=>{e.className=""}),r.className="looseChoice"}),0===o.children.length&&(r.className="looseChoice"),o.append(r)}}};r(""),s.append(a,o),n.main.append(s),a.addEventListener("input",()=>{r(a.value)}),a.focus()}}else if(game.opts.previewQuestion){activateLoading(!1,!1),clearInterval(c),r.outerHTML="",n.texts[0].innerHTML="",n.texts[1].innerHTML="",n.texts[0].setAttribute("text",""),n.texts[1].setAttribute("text","");const e=document.createElement("div");e.className="ChallengeQuestion";const t=document.createElement("span");if(0==game.guesses.length?(e.className="ChallengeQuestion noQuiz",t.innerHTML=`<input id="nameInput" placeholder="Enter Quiz Name" value="${document.getElementById("searchTerm").value||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input><a href="https://kahoot-win.herokuapp.com/blog/quiz-not-found" target="_blank" class="error-info">[?]</a>`):t.innerHTML="Question: "+(game.guesses[0].questions[game.index].question||game.guesses[0].questions[game.index].title),e.append(document.createElement("br"),document.createElement("br"),t),!HideAnswers.checked){const e=document.createElement("div");e.className="questionPreviewAnswers",e.innerHTML="<h4>Correct Answers</h4>";let t=[];for(let e in game.answers)game.answers[e].correct&&t.push(e);for(let n in t){const a=["red","blue","yellow","green"],s=document.createElement("template");s.innerHTML=`<div class="${game.answers[t[n]].correct?"correct":""}">\n            <img class="icon${a[t[n]]}" src="/resource/${KahootThemes[game.theme][a[t[n]]]}" alt="answer choice icon">\n            <span>${game.answers[t[n]].answer}</span>\n          </div>`,e.append(s.content.cloneNode(!0))}n.main.append(e)}n.main.append(e)}else if(0==game.guesses.length){const e=document.createElement("div");e.className="ChallengeQuestion noQuiz";const t=document.createElement("span");t.innerHTML=`<input id="nameInput" placeholder="Enter Quiz Name" value="${document.getElementById("searchTerm").value||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input><a href="https://kahoot-win.herokuapp.com/blog/quiz-not-found" target="_blank" class="error-info">[?]</a>`,e.append(document.createElement("br"),document.createElement("br"),t),n.main.append(e)}if(2==game.opts.fail){const e=document.createElement("div");e.className="failChoice";const t=document.createElement("input"),a=document.createElement("input");t.type=a.type="radio",t.name=a.name="fail",t.id="fail1",a.id="fail2",a.checked=!0;const s=document.createElement("label"),o=document.createElement("label");s.htmlFor="fail1",o.htmlFor="fail2",s.innerHTML="&nbsp;Do fail&nbsp;",o.innerHTML="Don't Fail",e.append(t,s,a,o),n.main.append(e),s.onclick=o.onclick=function(){setTimeout(()=>{t.checked?send({type:"FAIL_CURRENT_QUESTION",message:!0}):send({type:"FAIL_CURRENT_QUESTION",message:!1})})}}return n}}class QuizStartPage{constructor(){const e=new LobbyPage;return ChallengeContinueButton.style.display="none",e.texts[0].innerHTML="Get Ready!",e.texts[0].setAttribute("text","Get Ready!"),e.texts[0].id="snarkText",e.texts[1].innerHTML="Loading...",e.texts[1].setAttribute("text","Loading..."),e.texts[1].id="bottomText",document.body.className="purple2",activateLoading(!0,!1,"",!1),e}}class QuestionAnswererPage{constructor(e){if(!0===game.isAnswerPage)return game.isAnswerPage=!1;if(ChallengeContinueButton.style.display="none",2==game.opts.searchLoosely&&!game.questionStarted)return void(game.questionStarted=!0);2!=game.opts.searchLoosely||game.opts.manual||setTimeout(()=>{send({type:"ANSWER_QUESTION",message:null})},1e3*game.opts.timeout-(Date.now()-game.recievedTime));const t=new GetReadyPage(e||game.question,!0);if(game.receivedQuestion=!0,game.questionStarted=!0,document.body.className="Rainbow"==game.theme?"rainbow":"","content"==game.question.type)return document.body.className="rainbow",t.texts[0].innerHTML="Take a breather, enjoy the slideshow.",void(t.texts[1].innerHTML="");t.main.removeChild(t.texts[1]),t.main.removeChild(t.texts[0]);const n=document.createElement("div");if(n.className="Answers","open_ended"==game.question.type||"word_cloud"==game.question.type){document.body.className="rainbow";const e=document.createElement("input");e.className="openended";const a=game.answers.filter(e=>e.correct)[0];e.placeholder=a?a.answer:"",HideAnswers.checked&&(e.placeholder=""),e.onkeydown=t=>{"Enter"==t.key&&game.answer(e.value)},n.append(e),t.main.append(n),e.focus(),activateLoading(!1,!document.getElementById("manual").checked)}else{const e=document.createElement("img");e.src="/resource/"+KahootThemes[game.theme].red,e.alt="Red";const s=document.createElement("img");s.src="/resource/"+KahootThemes[game.theme].blue,s.alt="Blue";const o=document.createElement("img");o.src="/resource/"+KahootThemes[game.theme].green,o.alt="Green";const r=document.createElement("img");r.src="/resource/"+KahootThemes[game.theme].yellow,r.alt="Yellow";const l=[e,s,r,o],c=game.ans[game.index];for(let e=0;e<c;e++)l[e].setAttribute("draggable","false"),n.append(l[e]);if(2==game.ans[game.index]&&(e.style.maxHeight="100%",s.style.maxHeight="100%","TRUE_FALSE"==game.rawData.gameBlockLayout&&(e.setAttribute("css","layout-tfb"),s.setAttribute("css","layout-tfr"),e.src=s.src="/resource/"+KahootThemes[game.theme].blue,s.src="/resource/"+KahootThemes[game.theme].red)),t.main.append(n),activateLoading(!1,!document.getElementById("manual").checked),"jumble"==game.question.type){function a(e,t){const a=e.cloneNode(!0);n.append(a),a.style.left=(t.x||t.touches[0].clientX)+"px",e.style.visibility="hidden",a.className="draggable";const s=function(e){a.style.left=(e.x||e.touches[0].clientX)-16+"px",function(e,t){const a=[];let s=0,o=0;for(let e=0;e<t.length;e++){"hidden"===t[e].style.visibility&&(o=e);const n=t[e].getBoundingClientRect();s=n.width/2-16,a.push([n.x,n.x+n.width])}const r=(e.x||e.touches[0].clientX)+s;let l=0,c=1/0;for(let e=0;e<a.length;e++)Math.abs(r-a[e][0])<c&&(c=Math.abs(r-a[e][0]),l=e),Math.abs(r-a[e][1])<c&&(c=Math.abs(r-a[e][1]),l=e);"hidden"!==t[l].style.visibility&&(o>l?n.insertBefore(t[o],t[l]):n.insertBefore(t[o],t[l].nextSibling))}(e,n.querySelectorAll("img.jumble"))},o=function(){a.outerHTML="",e.style.visibility="",window.removeEventListener("mousemove",s),window.removeEventListener("touchmove",s),window.removeEventListener("mouseup",o),window.removeEventListener("touchend",o)};window.addEventListener("mousemove",s),window.addEventListener("touchmove",s),window.addEventListener("mouseup",o),window.addEventListener("touchend",o)}[e,s,r,o].forEach((e,t)=>{e.className="jumble",e.setAttribute("index",t);const n=function(t){a(e,t)};e.addEventListener("touchstart",n),e.addEventListener("mousedown",n)}),n.className="Answers jumble";const t=document.createElement("div");t.className="AnswerOptions";const l=document.createElement("img"),c=document.createElement("img");l.src="/resource/check.svg",c.src="/resource/reset.svg",l.onclick=()=>{game.answerJ(n.querySelectorAll("img.jumble"))},c.onclick=()=>{game.jumbleAnswer=[],new QuestionAnswererPage},t.append(l,c),n.append(t)}else if("multiple_select_quiz"==game.question.type||"multiple_select_poll"==game.question.type){game.multiAnswer={0:!1,1:!1,2:!1,3:!1},e.onclick=()=>{game.answerM(0,e)},s.onclick=()=>{game.answerM(1,s)},r.onclick=()=>{game.answerM(2,r)},o.onclick=()=>{game.answerM(3,o)};const t=document.createElement("div");t.className="AnswerOptions";const a=document.createElement("img"),l=document.createElement("img");a.src="/resource/check.svg",l.src="/resource/reset.svg",a.onclick=()=>{let e=[];for(let t in game.multiAnswer)game.multiAnswer[t]&&e.push(Number(t));game.answer(e)},l.onclick=()=>{game.multiAnswer={0:!1,1:!1,2:!1,3:!1},new QuestionAnswererPage},t.append(a,l),n.append(t)}else e.onclick=()=>{game.answer(0)},s.onclick=()=>{game.answer(1)},r.onclick=()=>{game.answer(2)},o.onclick=()=>{game.answer(3)};if(HideAnswers.checked&&"0"!=game.pin[0])return;const i=document.createElement("div");i.className="textAnswer",n.append(i);for(let e=0;e<game.answers.length;e++){game.answers[e].image&&(l[e].style.backgroundRepeat="no-repeat",l[e].style.backgroundSize="50% 50%",l[e].style.backgroundPosition="50% 50%",l[e].style.backgroundImage="url(https://media.kahoot.it/"+game.answers[e].image.id+")",l[e].src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),game.answers[e].correct&&(l[e].className=("jumble"===game.question.type?"jumble ":"")+"correct");const t=document.createElement("p");void 0===game.answers[e].answer?t.innerHTML="":t.innerHTML=("jumble"===game.question.type?e+1+". ":"")+game.answers[e].answer,i.append(t)}}try{if("Music"===game.theme)if(e.raw.timeAvailable<=5e3){const e=["005","005-1"];game.playSound(`/resource/music/${e[Math.floor(Math.random()*e.length)]}.m4a`)}else if(e.raw.timeAvailable<=1e4)game.playSound("/resource/music/010.m4a");else if(e.raw.timeAvailable<=2e4){const e=["020","020-1","020-2"];game.playSound(`/resource/music/${e[Math.floor(Math.random()*e.length)]}.m4a`)}else if(e.raw.timeAvailable<=3e4)game.playSound("/resource/music/030.m4a");else if(e.raw.timeAvailable<=6e4)game.playSound("/resource/music/060.m4a");else{const e=["120","120-1"];game.playSound(`/resource/music/${e[Math.floor(Math.random()*e.length)]}.m4a`)}}catch(e){}if("0"==game.pin[0]){const a=document.createElement("div");a.className="ChallengeQuestion";const s=document.createElement("span");s.innerHTML=game.rawData.question||game.rawData.title,a.append(s),n.append(a);let o=e.raw.timeAvailable/1e3;const r=document.createElement("p");r.className="chtimer",r.innerHTML=o;const l=setInterval(()=>{r.innerHTML=--o,r.isConnected||clearInterval(l)},1e3);t.bottom.prepend(r)}else if(0===game.guesses.length){const e=document.createElement("div");e.className="ChallengeQuestion noQuiz";const n=document.createElement("span");n.innerHTML=`<input id="nameInput" placeholder="Enter Quiz Name" value="${document.getElementById("searchTerm").value||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input><a href="https://kahoot-win.herokuapp.com/blog/quiz-not-found" target="_blank" class="error-info">[?]</a>`,e.append(document.createElement("br"),document.createElement("br"),n),t.main.append(e)}}}class QuestionSnarkPage{constructor(e){const t=new GetReadyPage(game.question,!0);if(document.body.className="rainbow",ChallengeContinueButton.style.display="none",t.texts[1].innerHTML=e,t.texts[1].setAttribute("text",e),t.texts[0].innerHTML="",t.texts[0].setAttribute("text",""),t.texts[0].id="snarkText",t.texts[1].id="bottomText",0===game.guesses.length){const e=document.createElement("div");e.className="ChallengeQuestion noQuiz";const n=document.createElement("span");n.innerHTML=`<input id="nameInput" placeholder="Enter Quiz Name" value="${document.getElementById("searchTerm").value||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input><a href="https://kahoot-win.herokuapp.com/blog/quiz-not-found" target="_blank" class="error-info">[?]</a>`,e.append(document.createElement("br"),document.createElement("br"),n),t.main.append(e)}activateLoading(!0,!1,"",!1)}}class QuestionEndPage{constructor(e){(e=JSON.parse(e)).isCorrect?game.streak++:game.streak=0,game.score=e.totalScore;const t=new GetReadyPage(game.question||e,!0);if("0"==game.pin[0]&&game.opts.ChallengeDisableAutoplay)ChallengeContinueButton.style.display="";else if(0===game.guesses.length){const e=document.createElement("div");e.className="ChallengeQuestion noQuiz";const n=document.createElement("span");n.innerHTML=`<input id="nameInput" placeholder="Enter Quiz Name" value="${document.getElementById("searchTerm").value||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input><a href="https://kahoot-win.herokuapp.com/blog/quiz-not-found" target="_blank" class="error-info">[?]</a>`,e.append(document.createElement("br"),document.createElement("br"),n),t.main.append(e)}t.texts[1].id="",document.body.className=e.isCorrect?"green":"red",t.bottom.querySelector(".dark").innerHTML=e.totalScore,t.texts[0].innerHTML=e.isCorrect?"Correct":"Incorrect",t.texts[0].setAttribute("text",t.texts[0].innerHTML),t.texts[1].innerHTML=`You are in ${e.rank||0}${1==e.rank?"st":2==e.rank?"nd":3==e.rank?"rd":"th"} place`,t.texts[1].setAttribute("text",t.texts[1].innerHTML);const n=document.createElement("h2");n.className="shadow";try{n.innerHTML=e.nemesis.name.replace(/</gm,"&lt;")?`Just ${e.nemesis.totalScore-e.totalScore} from ${e.nemesis.name}`:"",n.setAttribute("text",n.innerHTML)}catch(e){}const a=new Image;a.id="correctMark",a.src=e.isCorrect?"/resource/check.svg":"/resource/cross.svg";const s=document.createElement("h3");s.innerHTML=e.isCorrect?"+"+(e.points+e.pointsData.answerStreakPoints.streakBonus):"Keep trying at it!",s.className="shadow";const o=new Image,r=document.createElement("div"),l=document.createElement("div"),c=document.createElement("h2");c.innerHTML="Answer Streak",c.className="shadow",c.setAttribute("text","Answer Streak"),c.style="display: inline-block; font-size: 1.5rem",l.style.position="relative",r.id="streakImage",l.append(c);const i=document.createElement("p");i.innerHTML=e.pointsData.answerStreakPoints.streakLevel,o.src="/resource/fire.svg",r.append(o),r.append(i),l.append(r),e.pointsData.answerStreakPoints.streakLevel<1?(c.style.display="none",game.hadStreak&&(c.style.display="inline-block",c.innerHTML="Answer Streak Lost",c.setAttribute("text","Answer Streak Lost"),game.hadStreak=!1),r.style.display="none"):(game.hadStreak=!0,r.style.display="inline-block"),t.main.insertBefore(a,t.texts[1]),t.main.insertBefore(l,t.texts[1]),t.main.insertBefore(s,t.texts[1]),t.main.append(n),activateLoading(!1,!1)}}class QuizEndPage{constructor(e){let t;e=JSON.parse(e),game.endData=e,t=1==game.end.info.rank?"1<sup>st</sup>":2==game.end.info.rank?"2<sup>nd</sup>":3==game.end.info.rank?"3<sup>rd</sup>":game.end.info.rank<=5?"Top 5!":"Almost Had It!";const n=new GetReadyPage(game.question,!0);if("0"==game.pin[0]&&game.opts.ChallengeDisableAutoplay&&(ChallengeContinueButton.style.display=""),document.body.className="purple",n.texts[0].innerHTML=t,n.texts[0].setAttribute("text",""),n.texts[1].innerHTML="Good Game!",n.texts[1].setAttribute("text","Good Game!"),n.texts[0].id="",n.texts[1].id="finalText",n.top.className="extra darker",n.bottom.className="extra darker",game.endData.podiumMedalType){const e=document.createElement("img");e.src=`/resource/${game.endData.podiumMedalType}.svg`,e.alt="Victory Medal",e.id="resultMedal",n.main.append(e)}if(!game.opts.hideAnswers){const e=document.createElement("div");e.id="finalGuess",e.innerHTML=`<span id="closeend">X</span>\n      <span id="kahootguess" class="out block" url="https://create.kahoot.it/details/${game.end.info.quizId}">Kahoot Quiz</span>\n      ${game.guesses.length?`<span id="outguess" class="out block" url="https://create.kahoot.it/details/${game.guesses[0].uuid}">Guessed Quiz</span>`:'<span class="block disabled out">(Not found)</span>'}`,n.main.append(e),document.getElementById("closeend").addEventListener("click",()=>{e.outerHTML=""});const t=Array.from(document.getElementsByClassName("out"));if(document.getElementById("outguess")){const e=document.getElementById("outguess"),t=document.getElementById("kahootguess");e.getAttribute("url")===t.getAttribute("url")&&(e.className="out block correct")}for(let e of t)e.addEventListener("click",()=>{e.getAttribute("url")&&window.open(e.getAttribute("url"),"_blank")})}activateLoading(!1,!1)}}class TeamTalkPage{constructor(e){if(game.opts.teamtalk){const t=new QuestionAnswererPage(this.question||e);return game.isAnswerPage=!0,t}const{main:t,texts:n}=new GetReadyPage(this.question||e,!0),[a,s]=n;document.body.className="Rainbow"==game.theme?"rainbow":"cyan";const o=document.createElement("h2");o.innerHTML="5",a.innerHTML="Team Talk",a.setAttribute("text","Team Talk"),s.innerHTML="Discuss the answer!",s.setAttribute("text","Discuss the answer!"),o.id="timer",t.append(o);let r=game.question.teamTalkDuration||5;const l=setInterval(()=>{try{--r<0?clearInterval(l):(o.innerHTML=r,a.innerHTML="Team Talk",a.setAttribute("text","Team Talk"),s.innerHTML="Discuss the answer!",s.setAttribute("text","Discuss the answer!"))}catch(e){clearInterval(l)}},1e3)}}class TimeUpPage{constructor(){if(game.receivedQuestion)return;const{main:e,texts:t}=new LobbyPage;try{document.querySelector(".noQuiz").outerHTML=""}catch(e){}if(!game.guesses||0===game.guesses.length){const t=document.createElement("div");t.className="ChallengeQuestion noQuiz";const n=document.createElement("span");n.innerHTML=`<input id="nameInput" placeholder="Enter Quiz Name" value="${document.getElementById("searchTerm").value||""}" oninput="document.getElementById('searchTerm').value = this.value;game.updateName();"></input><a href="https://kahoot-win.herokuapp.com/blog/quiz-not-found" target="_blank" class="error-info">[?]</a>`,t.append(document.createElement("br"),document.createElement("br"),n),e.append(t)}const[n,a]=t;document.body.className="Rainbow"==game.theme?"rainbow":"red",n.innerHTML="Time's Up",n.id="snarkText",n.setAttribute("text","Time's Up"),a.innerHTML="You are in 0th place",a.setAttribute("text","You are in 0th place");const s=document.createElement("h3");s.innerHTML="We believe in you!",s.setAttribute("text","We believe in you!"),s.className="shadow",e.insertBefore(s,a)}}class FeedbackPage{constructor(){const{main:e,texts:t,top:n,bottom:a}=new LobbyPage,[s,o]=t;try{document.querySelector(".noQuiz").outerHTML=""}catch(e){}document.body.className="Rainbow"==game.theme?"rainbow":"",a.outerHTML="",n.className="gameOver",n.innerHTML="<p>Game Over</p>";try{document.querySelector("noQuiz").outerHTML=""}catch(e){}e.className="Feedback",e.style.padding="0",s.outerHTML="",o.outerHTML="";const r=document.createElement("div");r.className="feedback",r.innerHTML='\n    <p>How do you rate this kahoot?</p>\n    <div class="star-container">\n      <input id="star1" type="radio" name="star" value="1"/>\n      <label for="star1"></label>\n      <input id="star2" type="radio" name="star" value="2"/>\n      <label for="star2"></label>\n      <input id="star3" type="radio" name="star" value="3"/>\n      <label for="star3"></label>\n      <input id="star4" type="radio" name="star" value="4"/>\n      <label for="star4"></label>\n      <input id="star5" type="radio" name="star" value="5"/>\n      <label for="star5"></label>\n    </div>\n    <div class="thumb-container">\n      <p>Did you learn something?</p>\n      <div>\n        <input type="radio" name="learn" id="learn1" value="1"/>\n        <label for="learn1"></label>\n        <input type="radio" name="learn" id="learn2" value="0"/>\n        <label for="learn2"></label>\n      </div>\n    </div>\n    <div class="thumb-container">\n      <p>Do you recommend it?</p>\n      <div>\n        <input type="radio" name="rec" id="rec1" value="1"/>\n        <label for="rec1"></label>\n        <input type="radio" name="rec" id="rec2" value="0"/>\n        <label for="rec2"></label>\n      </div>\n    </div>\n    <p>To continue, tell us how you feel</p>\n    <div class="face-container">\n      <input type="radio" name="feel" id="feel1" value="1"/>\n      <label for="feel1"></label>\n      <input type="radio" name="feel" id="feel2" value="0"/>\n      <label for="feel2"></label>\n      <input type="radio" name="feel" id="feel3" value="-1"/>\n      <label for="feel3"></label>\n    </div>',e.append(r);const l=Array.from(document.querySelectorAll('[name="star"]'));for(let e of l)e.addEventListener("click",()=>{for(let e of l)e.className="";for(let t=+e.id.split("star")[1];t>0;t--)document.getElementById("star"+t).className="selected"});const c=document.getElementById("feel1"),i=document.getElementById("feel2"),m=document.getElementById("feel3");c.onclick=m.onclick=i.onclick=()=>{const e=(document.querySelector('input[name="star"]:checked')||{}).value,t=(document.querySelector('input[name="learn"]:checked')||{}).value,n=(document.querySelector('input[name="rec"]:checked')||{}).value,a=document.querySelector('input[name="feel"]:checked').value;return send({type:"SEND_FEEDBACK",message:{fun:+e,learn:+t,recommend:+n,overall:+a}}),new QuizEndPage(JSON.stringify(game.endData))}}}function calculateTimeout(e,t){const n=-2*t*(e/1e3-1);return n<.1?0:n}function activateLoading(e,t,n,a){HideDiv.style.background=t?"rgba(0,0,0,0.3)":"transparent",HideDiv.style.pointerEvents=t?"all":"none",HideDiv.children[0].children[0].style.display=e?"inline-block":"none",LoadingText.innerHTML=n||"",HideDiv.children[0].children[0].src=a?"/resource/load-large.svg":"/resource/load-hole.svg"}function setSchema(e,t,n,a){n&&e.setAttribute("itemscope",""),a&&e.setAttribute("itemtype","https://schema.org/"+t),a&&e.setAttribute("itemprop",a)}function sleep(e){return new Promise(t=>{setTimeout(t,1e3*e)})}async function resetGame(e){try{game.music.pause()}catch(e){}const t=game;if(socket&&(socket.onclose=null,socket.close(),socket=null),game=new Game,e){await game.sendPin(t.pin);const e=async n=>{n=n.data,"Message.PinGood"==JSON.parse(n).type?(new LobbyPage,await sleep((25e3-(Date.now()-t.disconnectTime))/1e3),send({message:{cid:t.cid,answers:t.got_answers},type:"RECOVER_DATA"}),game.saveOptions()):resetGame(),socket.removeEventListener("message",e)};socket.addEventListener("message",e)}else new LoginPage,document.body.className="rainbow",document.getElementById("author").value="",document.getElementById("uuid").value="",document.getElementById("searchTerm").value="",document.getElementById("timeout_custom_1").value="",document.getElementById("timeout_custom_2").value="",game.loadOptions()}function clearUI(){return activateLoading(!1,!1),UIDiv.innerHTML="",document.createElement("div")}let presetNumber=0;function loadSetting(e,t){for(let t in e){const n=document.getElementById(t);"checkbox"==n.type||"radio"==n.type?n.checked=e[t]:n.value=e[t]}game.saveOptions(),new ErrorHandler("Restored preset '"+t+"'",!0)}function addPreset(e){game.saveOptions(),document.querySelectorAll(".preset.remove").forEach(e=>{e.outerHTML=""});let t=[];if(localStorage.presets)try{t=JSON.parse(localStorage.presets)}catch(e){}t.push({name:e,options:{brute:game.opts.brute,fail:game.opts.fail,teamtalk:game.opts.teamtalk,manual:game.opts.manual,previewQuestion:game.opts.previewQuestion,searchLoosely:game.opts.searchLoosely,teamMembers:game.opts.teamMembers,theme:game.opts.theme,timeout:game.opts.timeout}}),localStorage.presets=JSON.stringify(t),loadPresets()}function loadPresets(){document.querySelectorAll(".preset.remove").forEach(e=>{e.outerHTML=""});try{const e=JSON.parse(localStorage.presets),t=document.getElementById("preset_add_div");for(let n of e){const e=n.options,a=document.createElement("template");a.innerHTML=`<div class="preset flex remove">\n        <div class="center">\n          <span class="presetTitle">${n.name} <label for="preset_${presetNumber}">(?)</label></span>\n          <input type="checkbox" id="preset_${presetNumber}" class="ch nosend">\n          <div>\n            <p>Theme <span class="yellow">${e.theme}</span></p>\n            <p>Timeout <span class="yellow">${e.timeout||"0"}</span></p>\n            <p>Team <span class="yellow">${e.teamMembers||"(unset)"}</span></p>\n            <p>Fail <span class="${Number(e.fail)?"green":"red"}">${Number(e.fail)?"ON":"OFF"}</span></p>\n            <p>Loose <span class="${Number(e.searchLoosely)?"green":"red"}">${Number(e.searchLoosely)?"ON":"OFF"}</span></p>\n            <p>Brute <span class="${e.brute?"green":"red"}">${e.brute?"ON":"OFF"}</span></p>\n            <p>Manual <span class="${e.manual?"green":"red"}">${e.manual?"ON":"OFF"}</span></p>\n            <p>Preview <span class="${e.previewQuestion?"green":"red"}">${e.previewQuestion?"ON":"OFF"}</span></p>\n            <p>Skip Team Talk <span class="${e.teamtalk?"green":"red"}">${e.teamtalk?"ON":"OFF"}</span></p>\n          </div>\n          <button id="restore_${presetNumber}" class="block">Restore</button>\n          <img src="/resource/cross.svg" alt="delete" id="delete_${presetNumber}">\n        </div>\n      </div>`,document.getElementById("preset_container").insertBefore(a.content.cloneNode(!0),t),document.getElementById("restore_"+presetNumber).onclick=function(){loadSetting({theme:e.theme,timeout:e.timeout,teamMembers:e.teamMembers,fail:e.fail,searchLoosely:e.searchLoosely,brute:e.brute,manual:e.manual,previewQuestion:e.previewQuestion},n.name)},document.getElementById("delete_"+presetNumber).onclick=function(){try{let e=JSON.parse(localStorage.presets);e=e.filter(e=>e.name!=n.name),localStorage.presets=JSON.stringify(e),loadPresets()}catch(e){}},presetNumber++}}catch(e){}}const ChallengeContinueButton=document.getElementById("ChallengeNext"),SettingDiv=document.getElementById("settings"),SettingSwitch=document.getElementById("menu_toggle"),AboutSwitch=document.getElementById("about"),ChangelogSwitch=document.getElementById("changelog"),HideDiv=document.getElementsByClassName("Loading")[0],UIError=document.getElementsByClassName("Error")[0],UIDiv=document.getElementsByClassName("Main")[0],HideAnswers=document.getElementById("hideAnswers"),LoadingText=document.getElementById("loadingText"),ThemeChooser=document.getElementById("theme"),QuizResult=document.getElementById("quizresult");new LoginPage(!1),loadPresets();let closePage=0;const SearchDivSettings=document.getElementById("div_search_options"),GameDivSettings=document.getElementById("div_game_options"),ChallengeDivSettings=document.getElementById("div_challenge_options"),dso=document.getElementById("dso"),dgo=document.getElementById("dgo"),dco=document.getElementById("dco");function Themer(){game.theme=ThemeChooser.value,"Rainbow"===game.theme?(SettingDiv.className="rainbow correct",document.querySelector(".About").className="About rainbow"):"FRANXX"===game.theme?(SettingDiv.className="franxx",document.querySelector(".About").className="About"):(SettingDiv.className="",document.querySelector(".About").className="About")}SearchDivSettings.onchange=GameDivSettings.onchange=ChallengeDivSettings.onchange=function(e){switch(e.target.id){case"div_search_options":dso.className="flex selected",dgo.className="flex",dco.className="flex";break;case"div_game_options":dso.className="flex",dgo.className="flex selected",dco.className="flex";break;case"div_challenge_options":dso.className="flex",dgo.className="flex",dco.className="flex selected"}},dgo.className="flex selected",AboutSwitch.addEventListener("click",()=>{closePage=AboutSwitch.checked?1:0}),ChangelogSwitch.addEventListener("click",()=>{closePage=ChangelogSwitch.checked?2:0}),ChallengeContinueButton.addEventListener("click",()=>{send({message:"",type:"NEXT_CHALLENGE"})}),SettingSwitch.onclick=()=>{SettingSwitch.checked||(dataLayer.push({event:"toggle_settings"}),document.getElementById("preset_toggle").checked&&(document.getElementById("preset_toggle").checked=!1),game.saveOptions()),closePage=0},ThemeChooser.addEventListener("change",Themer),QuizResult.addEventListener("click",()=>{QuizResult.getAttribute("url")&&window.open(QuizResult.getAttribute("url"),"_blank")});const shortcuts=e=>{if(e.ctrlKey){switch(e.key){case"e":send({type:"RECONNECT",message:"I think i lost connection"}),dataLayer.push({type:"reconnect",value:""});break;case"b":document.getElementById("brute").click(),new ErrorHandler("Brute 2FA: "+(document.getElementById("brute").checked?"ON":"OFF"),!0),dataLayer.push({type:"brute",value:document.getElementById("brute").checked});break;case"p":document.getElementById("fail").value=0==document.getElementById("fail").value?.9:0,new ErrorHandler("Purposely Fail: "+(0!=document.getElementById("fail").value?"ON":"OFF"),!0),dataLayer.push({type:"fail",value:document.getElementById("fail").value});break;case"m":document.getElementById("manual").click(),new ErrorHandler("Manual Control: "+(document.getElementById("manual").checked?"ON":"OFF"),!0),dataLayer.push({type:"manual",value:document.getElementById("manual").checked});break;case"h":document.getElementById("hideAnswers").click(),new ErrorHandler("Hide Correct: "+(document.getElementById("hideAnswers").checked?"ON":"OFF"),!0),dataLayer.push({type:"hide",value:document.getElementById("hideAnswers").checked});break;case"o":document.getElementById("challengeCorrect").click(),new ErrorHandler("Challenge Always Correct: "+(document.getElementById("challengeCorrect").checked?"ON":"OFF"),!0),dataLayer.push({type:"correct",value:document.getElementById("challengeCorrect").checked});break;case"u":document.getElementById("previewQuestion").click(),new ErrorHandler("Preview Question: "+(document.getElementById("previewQuestion").checked?"ON":"OFF"),!0),dataLayer.push({type:"preview",value:document.getElementById("previewQuestion").checked});break;case"j":try{if(SettingDiv.style.display){SettingDiv.style="",document.querySelector(".Changelog").style="",document.querySelector(".About").style="",document.getElementById("tutorial").style="",document.querySelector(".misc").style="",document.querySelector(".Error").style="";try{document.getElementById("logotext").style=""}catch(e){}try{document.querySelector(".sm.sidebar").style=""}catch(e){}try{document.getElementById("abtlnk").style=""}catch(e){}try{document.getElementById("chnge").style=""}catch(e){}try{document.getElementById("lang").style=""}catch(e){}}else{SettingDiv.style="display: none",document.querySelector(".Changelog").style="display: none",document.querySelector(".About").style="display: none",document.getElementById("tutorial").style="display: none",document.querySelector(".misc").style="opacity: 0",document.querySelector(".Error").style="display: none";try{document.getElementById("logotext").style="display: none"}catch(e){}try{document.querySelector(".sm.sidebar").style="display: none"}catch(e){}try{document.getElementById("abtlnk").style="display: none"}catch(e){}try{document.getElementById("chnge").style="display: none"}catch(e){}try{document.getElementById("lang").style="display: none"}catch(e){}try{document.querySelector(".grecaptcha-badge").style.visibility="hidden"}catch(e){}}}catch(e){console.log(e)}finally{const e=document.head.querySelector('[rel="shortcut icon"]')||document.createElement("link");e.isConnected||(e.rel="shortcut icon",e.href="https://kahoot.it/favicon.ico",document.head.append(e),document.title="Play Kahoot!"),document.getElementById("manual").checked=!0,document.getElementById("hideAnswers").checked=Boolean(SettingDiv.style.display),game.saveOptions(),dataLayer.push({type:"panick",value:""})}break;case"d":document.getElementById("ChallengeDisableAutoplay").click(),new ErrorHandler("Challenge Autoplay: "+(document.getElementById("ChallengeDisableAutoplay").checked?"OFF":"ON"),!0),dataLayer.push({type:"autoplay",value:document.getElementById("ChallengeDisableAutoplay").checked});break;case"k":document.getElementById("searchLoosely").value=Number(document.getElementById("searchLoosely").value)?0:1,new ErrorHandler("Loose Searching: "+(Number(document.getElementById("searchLoosely").value)?"ON":"OFF"),!0),dataLayer.push({type:"loose",value:document.getElementById("searchLoosely").value});break;case"t":document.getElementById("teamtalk").click(),new ErrorHandler("Skip Team Talk: "+(Number(document.getElementById("teamtalk").checked)?"ON":"OFF"),!0),dataLayer.push({type:"teamtalk",value:document.getElementById("teamtalk").checked});break;default:return}dataLayer.push({event:"shortcut"}),e.preventDefault(),e.stopPropagation(),game.saveOptions()}};window.addEventListener("keydown",shortcuts),UIError.addEventListener("click",()=>{clearTimeout(game.errorTimeout),UIError.style.right="",dataLayer.push({event:"close_error"})});let pressTime=-1;SettingSwitch.addEventListener("click",()=>{if(Date.now()-pressTime<500)return pressTime=-1,void shortcuts({ctrlKey:!0,key:"j",preventDefault:()=>{},stopPropagation:()=>{}});pressTime=Date.now()});const SearchInput=document.getElementById("sub-quiz-input"),SearchOutput=document.getElementById("sub-quiz-output");let SearchIndex=0;function Search(e,t){SearchOutput.innerHTML="Loading...";const n=new XMLHttpRequest;n.open("GET",`/search?q=${encodeURIComponent(e)}&c=${Number(t)}`),n.send(),n.onload=function(){const a=JSON.parse(n.response);if(0===a.length)return void(SearchOutput.innerHTML="No Results.");FormatSearch(a),document.getElementById("sub-quiz-next").addEventListener("click",()=>{Search(e,(t||0)+25)});Array.from(document.getElementsByClassName("sub-quiz-button")).forEach(e=>{e.addEventListener("click",()=>{const t=e.nextElementSibling.value;document.getElementById("uuid").value=t,document.getElementById("sub-uuid").checked=!1})})}}function FormatSearch(e){SearchOutput.innerHTML='\n  <span>\n    <span class="sub-quiz-img"><img src="/resource/red-konosuba.svg"/></span>\n    <span class="sub-quiz-title">Quiz Title</span>\n    <span class="sub-quiz-author">Quiz Creator</span>\n    <span class="sub-quiz-questions"># of Questions</span>\n    <button id="sub-quiz-next">Next</button>\n  </span>\n  <hr/>\n  ';for(let t in e){const n=e[t],a=document.createElement("template");a.innerHTML=`<span>\n      <span class="sub-quiz-img"><img src="${n.cover}"/></span>\n      <span class="sub-quiz-title">${n.title}</span>\n      <span class="sub-quiz-author">${n.creator_username}</span>\n      <span class="sub-quiz-questions">${n.questions.length}</span>\n      <button class="sub-quiz-button">Use</button>\n      <input type="text" class="ch" value="${n.uuid}"/>\n    </span>`,SearchOutput.append(a.content.cloneNode(!0))}}SearchInput.addEventListener("keydown",e=>{"Enter"===e.code&&(SearchIndex=0,Search(SearchInput.value,SearchIndex))}),game.loadOptions(),game.theme=ThemeChooser.value,"Kahoot"!=game.theme&&new LoginPage;window.addEventListener("load",()=>{localStorage.seenNotice||showNotice(),localStorage.returningUser||activateTutorial()});const TutorialDiv=document.getElementById("tutorial");function activateTutorial(){if(localStorage.returningUser=!0,TutorialDiv&&TutorialDiv.innerHTML)return;AboutSwitch.checked&&AboutSwitch.click();const t=document.createElement("template");t.innerHTML="\n    <div class=\"tut_cont\">\n      <div id=\"t_step0\">\n        <h1>Hey there! Looks like you are new here. Would you like a tutorial?</h1>\n        <button onclick=\"tutorialSteps(0)\">Yes please!</button>\n        <button onclick=\"dataLayer.push({event:'close_tutorial'});document.getElementById('tutorial').innerHTML = '';new ErrorHandler('If you ever need me again, click the tutorial button in the \\'about\\' section!',true);\">No thank you.</button>\n      </div>\n    </div>\n  ",TutorialDiv.append(t.content.cloneNode(!0))}function tutorialSteps(t){switch(dataLayer.push({event:"do_tutorial",value:t}),String(t)){case"0":{TutorialDiv.innerHTML="";let t=document.createElement("template");t.innerHTML='\n            <div class="tut_cont">\n              <div id="t_step1">\n                <h1>Here, you input your game PIN from the host\'s Kahoot game. If you have a challenge link, you can also put that as the pin. To join the weekly kahoots, use "weekly" and "weekly-previous"</h1>\n                <p>At the end of this tutorial, you can also learn about why Kahoot Winner might not win all the time.</p>\n                <button onclick="tutorialSteps(1);">Next</button>\n                <button onclick="document.getElementById(\'tutorial\').innerHTML = \'\';new ErrorHandler(\'If you ever need me again, click the tutorial button in the \\\'about\\\' section!\',true);">Done</button>\n              </div>\n            </div>\n          ',TutorialDiv.append(t.content.cloneNode(!0));break}case"1":{new LoginPage(!0),TutorialDiv.innerHTML="";let t=document.createElement("template");t.innerHTML='\n            <div class="tut_cont">\n              <div id="t_step1">\n                <h1>Once you input a valid pin, you can choose your name, or get a random one.</h1>\n                <button onclick="tutorialSteps(2)">Next</button>\n                <button onclick="tutorialSteps(10)">Done</button>\n              </div>\n            </div>\n          ',TutorialDiv.append(t.content.cloneNode(!0));break}case"2":{SettingSwitch.click(),TutorialDiv.style.zIndex=1e3,TutorialDiv.innerHTML="";let t=document.createElement("template");t.innerHTML='\n            <div class="tut_cont">\n              <div id="t_step3">\n                <h1>Here are the settings that you can change. You can access this menu by clicking the gear at the bottom right, or pressing ESCAPE.</h1>\n                <button onclick="tutorialSteps(3)">Next</button>\n                <button onclick="tutorialSteps(10)">Done</button>\n              </div>\n            </div>\n          ',TutorialDiv.append(t.content.cloneNode(!0));break}case"3":{SettingSwitch.checked||SettingSwitch.click(),TutorialDiv.innerHTML="";let t=document.createElement("template");t.innerHTML='\n            <div class="tut_cont">\n              <div id="t_step4">\n                <p>These settings help the server to find the quiz you are playing. If you know the information, putting it in here will greatly help.</p>\n                <button onclick="tutorialSteps(4)">Next</button>\n                <button onclick="tutorialSteps(10)">Done</button>\n              </div>\n            </div>\n          ',TutorialDiv.append(t.content.cloneNode(!0));break}case"4":{SettingSwitch.checked||SettingSwitch.click(),TutorialDiv.innerHTML="";let t=document.createElement("template");t.innerHTML='\n            <div class="tut_cont">\n              <div id="t_step5">\n                <h1>These settings control the game experience.</h1>\n                <p>Answer Timeout - Set a timer before the server answers the question. This should help make you less suspicious.</p>\n                <p>Team Members - Customize your team members for team mode!</p>\n                <p>Bypass 2FA - Automatically logs in if 2 Factor Auth is enabled.</p>\n                <p>Fail Purposely - Sometimes will answer incorrectly. Not compatible with Manual Control</p>\n                <p>Manual Control - Allows you to have the power to answer the Kahoots. This is useful especially at the start, when the server may not have found the quiz yet.</p>\n                <p>Preview Question - Allows you to see the questions and answers beforehand.</p>\n                <p>Search Loosely - Makes the server search for quizzes loosely, meaning that you can find quizzes with randomized order of questions.</p>\n                <p>Hide Correct - Essentially makes Manual Control feel the same as if you were using the normal Kahoot page.</p>\n                <h3>Challenge Options</h3>\n                <p>Points - Customize the amount of points per question</p>\n                <p>Always Correct - Always get the answers correct, even if wrong. (used with Manual Control)</p>\n                <p>Disable Autoplay - Wait to continue to the next question, rather than automatically playing through.</p>\n                <button onclick="tutorialSteps(5)">Next</button>\n                <button onclick="tutorialSteps(10)">Done</button>\n              </div>\n            </div>\n          ',TutorialDiv.append(t.content.cloneNode(!0));break}case"5":{SettingSwitch.checked&&SettingSwitch.click(),game.question={type:"quiz",index:0,data:[{answer:"Correct",correct:!0},{answer:"Incorrect",correct:!1},{answer:"Tutorial",correct:!1},{answer:"",correct:!1,image:{id:"dfa9fc36-1122-4dc2-a00b-04d490c07765"}}],total:"42.069",currentGuesses:[{questions:[{time:2e4}]}],raw:{}},game.question.ans=[game.question.data.length],game.score=-1/0,game.name="Tutorial",game.pin="12345-LUGGAGE",new QuestionAnswererPage,activateLoading(!1),TutorialDiv.innerHTML="",TutorialDiv.style.zIndex=0;let t=document.createElement("template");t.innerHTML='\n            <div class="tut_cont">\n              <div id="t_step6">\n                <h1>Here is what the answer page looks like.</h1>\n                <button onclick="tutorialSteps(6)">Next</button>\n                <button onclick="tutorialSteps(10)">Done</button>\n              </div>\n            </div>\n          ',TutorialDiv.append(t.content.cloneNode(!0));break}case"6":{TutorialDiv.innerHTML="";let t=document.createElement("template");t.innerHTML='\n            <div class="tut_cont">\n              <div id="t_step6">\n                <h1>The text of the answers the server thinks is on the screen is displayed above the shape.</h1>\n                <button onclick="tutorialSteps(7)">Next</button>\n                <button onclick="tutorialSteps(10)">Done</button>\n              </div>\n            </div>\n          ',TutorialDiv.append(t.content.cloneNode(!0));break}case"7":{TutorialDiv.innerHTML="";let t=document.createElement("template");t.innerHTML='\n            <div class="tut_cont">\n              <div id="t_step8">\n                <h1>Correct answers are highlighted with a rainbow border.</h1>\n                <button onclick="tutorialSteps(8)">Next</button>\n                <button onclick="tutorialSteps(10)">Done</button>\n              </div>\n            </div>\n          ',TutorialDiv.append(t.content.cloneNode(!0));break}case"8":{TutorialDiv.innerHTML="";let t=document.createElement("template");t.innerHTML='\n            <div class="tut_cont">\n              <div id="t_step9">\n                <h1>Answers that use images will replace the shape.</h1>\n                <button onclick="tutorialSteps(9)">Next</button>\n                <button onclick="tutorialSteps(10)">Done</button>\n              </div>\n            </div>\n          ',TutorialDiv.append(t.content.cloneNode(!0));break}case"9":{game.end={info:{rank:1}},new QuizEndPage(JSON.stringify({metal:"gold"})),TutorialDiv.innerHTML="";let t=document.createElement("template");t.innerHTML='\n            <div class="tut_cont">\n              <div id="t_step9">\n                <h1>Now, time to win!</h1>\n                <button onclick="tutorialSteps(11)">Common Issues with Kahoot! Winner</button>\n                <button onclick="tutorialSteps(10)">Let\'s Go!</button>\n              </div>\n            </div>\n          ',TutorialDiv.append(t.content.cloneNode(!0));break}case"11":{TutorialDiv.innerHTML="";let t=document.createElement("template");t.innerHTML='\n          <div class="tut_cont">\n            <div id="t_step11">\n              <h1>I often get asked why it is answering <span style="color: rgb(226,27,60);">incorrectly</span>.</h1>\n              <p>Recently, Kahoot! removed the quiz name from being sent to the client. Input the quiz name in the input box above as best you can.</p>\n              <p>Most of the time, it is because the quiz is private (unable to be found on Discover)</p>\n              <p>It is not possible to get the answers to a private quiz hosted live. Challenges are still ok.</p>\n              <p>Another reason that prevents it from finding the quiz is that you joined the game late. In this case, you must provide the <strong>EXACT</strong> name of the quiz, otherwise the server doesn\'t know what to search for.</p>\n              <p>Sometimes, the host randomizes the question. In this case, enable <b>Loose Searching</b> and type in the question beforehand.</p>\n              <p>Also, the host may enable randomized answers. If this is the case, simply take manual control and answer for the server instead.</p>\n              <button onclick="tutorialSteps(10)">Got it.</button>\n            </div>\n          </div>\n        ',TutorialDiv.append(t.content.cloneNode(!0));break}case"10":TutorialDiv.innerHTML="",resetGame(),dataLayer.push({event:"complete_tutorial"}),setTimeout((function(){return new ErrorHandler("Finished Tutorial! Way to go!",!0)}),300)}}function showNotice(){localStorage.seenNotice=!0;const t=document.createElement("template");t.innerHTML='<div class="notice">\n    <button onclick="document.querySelector(\'.notice\').outerHTML = \'\';">OK</button>\n    <h3><b>Important notice: </b><span class="red">Kahoot no longer sends the quiz name to the client.</span></h3>\n    <h4>What does this mean?</h4>\n    <p>You now need to input the quiz name yourself. You may get lucky if the quiz is super popular, as we now store Kahoot quizzes that have been played in the database.</p>\n    <p>You can put the quiz name at the input at the top:</p>\n    <div>\n      <img src="/resource/misc/notice-2020-07-03.png" alt="input at the top">\n    </div>\n  </div>',document.body.append(t.content.cloneNode(!0))}